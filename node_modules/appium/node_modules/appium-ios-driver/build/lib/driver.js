"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.defaultServerCaps = exports.IosDriver = void 0;

require("source-map-support/register");

var _appiumBaseDriver = require("appium-base-driver");

var utils = _interopRequireWildcard(require("./utils"));

var _logger = _interopRequireDefault(require("./logger"));

var _path = _interopRequireDefault(require("path"));

var _lodash = _interopRequireDefault(require("lodash"));

var _bluebird = _interopRequireDefault(require("bluebird"));

var _appiumSupport = require("appium-support");

var _appiumIosSimulator = require("appium-ios-simulator");

var _uiauto = require("./uiauto/uiauto");

var _instruments = require("./instruments");

var _asyncbox = require("asyncbox");

var _index = _interopRequireDefault(require("./commands/index"));

var _desiredCaps = require("./desired-caps");

var _nodeIdevice = _interopRequireDefault(require("node-idevice"));

var _safari = require("./commands/safari");

var _safariLauncher = require("./safari-launcher");

var _settings = require("./settings");

var _device = require("./device");

var _iwdp = require("./iwdp");

let iDevice = function (...args) {
  let device = (0, _nodeIdevice.default)(...args);
  let promisified = {};

  for (let m of ['install', 'installAndWait', 'remove', 'isInstalled']) {
    promisified[m] = _bluebird.default.promisify(device[m].bind(device));
  }

  return promisified;
};

const defaultServerCaps = {
  webStorageEnabled: false,
  locationContextEnabled: false,
  browserName: '',
  platform: 'MAC',
  javascriptEnabled: true,
  databaseEnabled: false,
  takesScreenshot: true,
  networkConnectionEnabled: false
};
exports.defaultServerCaps = defaultServerCaps;
const LOG_LOCATIONS = [_path.default.resolve('/', 'Library', 'Caches', 'com.apple.dt.instruments')];

if (process.env.HOME) {
  LOG_LOCATIONS.push(_path.default.resolve(process.env.HOME, 'Library', 'Logs', 'CoreSimulator'));
}

class IosDriver extends _appiumBaseDriver.BaseDriver {
  resetIos() {
    this.appExt = '.app';
    this.xcodeVersion = null;
    this.iosSdkVersion = null;
    this.logs = {};
    this.instruments = null;
    this.uiAutoClient = null;

    this.onInstrumentsDie = function () {};

    this.stopping = false;
    this.cbForCurrentCmd = null;
    this.remote = null;
    this.curContext = null;
    this.curWebFrames = [];
    this.selectingNewPage = false;
    this.windowHandleCache = [];
    this.webElementIds = [];
    this.implicitWaitMs = 0;
    this.asynclibWaitMs = 0;
    this.pageLoadMs = 6000;
    this.asynclibResponseCb = null;
    this.returnedFromExecuteAtom = {};
    this.executedAtomsCounter = 0;
    this.curCoords = null;
    this.curWebCoords = null;
    this.landscapeWebCoordsOffset = 0;
    this.keepAppToRetainPrefs = false;
    this.ready = false;
    this.asyncWaitMs = 0;
    this.settings = new _appiumBaseDriver.DeviceSettings({}, _lodash.default.noop);
    this.locatorStrategies = ['xpath', 'id', 'class name', '-ios uiautomation', 'accessibility id'];
    this.webLocatorStrategies = ['link text', 'css selector', 'tag name', 'partial link text'];
  }

  constructor(opts, shouldValidateCaps) {
    super(opts, shouldValidateCaps);
    this.desiredCapConstraints = _desiredCaps.desiredCapConstraints;
    this.resetIos();
    this.getDevicePixelRatio = _lodash.default.memoize(this.getDevicePixelRatio);
  }

  validateLocatorStrategy(strategy) {
    super.validateLocatorStrategy(strategy, this.isWebContext());
  }

  async start() {
    if (this.isRealDevice()) {
      await this.startRealDevice();
    } else {
      await this.startSimulator();
    }

    this.ready = true;
  }

  async createSession(...args) {
    let [sessionId, caps] = await super.createSession(...args);
    this.xcodeVersion = await utils.getAndCheckXcodeVersion(this.opts);

    _logger.default.debug(`Xcode version set to ${this.xcodeVersion.versionString}`);

    if (this.xcodeVersion.major >= 8) {
      let msg = `Appium's IosDriver does not support Xcode version ${this.xcodeVersion.versionString}. ` + 'Apple has deprecated UIAutomation. Use the "XCUITest" automationName capability instead.';

      _logger.default.errorAndThrow(new _appiumBaseDriver.errors.SessionNotCreatedError(msg));
    }

    this.caps = Object.assign({}, defaultServerCaps, this.caps);
    this.caps.desired = caps;
    await utils.detectUdid(this.opts);
    await utils.prepareIosOpts(this.opts);
    this.realDevice = null;
    this.useRobot = this.opts.useRobot;
    this.safari = this.opts.safari;
    this.opts.curOrientation = this.opts.initialOrientation;
    this.sock = _path.default.resolve(this.opts.tmpDir || '/tmp', 'instruments_sock');

    try {
      await this.configureApp();
    } catch (err) {
      _logger.default.error(`Bad app: '${this.opts.app}'. App paths need to ` + `be absolute, or relative to the appium server ` + `install dir, or a URL to compressed file, or a ` + `special app name.`);

      throw err;
    }

    await this.start();
    this.startNewCommandTimeout('createSession');
    return [sessionId, this.caps];
  }

  async stop() {
    this.ready = false;

    if (this.uiAutoClient) {
      await this.uiAutoClient.shutdown();
    }

    if (this.instruments) {
      try {
        await this.instruments.shutdown();
      } catch (err) {
        _logger.default.error(`Instruments didn't shut down. ${err}`);
      }
    }

    if (this.caps && this.caps.customSSLCert && !this.isRealDevice()) {
      _logger.default.debug(`Uninstalling ssl certificate for udid '${this.sim.udid}'`);

      await (0, _appiumIosSimulator.uninstallSSLCert)(this.caps.customSSLCert, this.sim.udid);
    }

    if (this.opts.enableAsyncExecuteFromHttps && !this.isRealDevice()) {
      await this.stopHttpsAsyncServer();
    }

    this.uiAutoClient = null;
    this.instruments = null;
    this.realDevice = null;
    this.curCoords = null;
    this.opts.curOrientation = null;

    if (!_lodash.default.isEmpty(this.logs)) {
      await this.logs.syslog.stopCapture();
      this.logs = {};
    }

    if (this.remote) {
      await this.stopRemote();
    }

    await this.stopIWDP();
  }

  async deleteSession() {
    _logger.default.debug('Deleting ios session');

    await this.stop();

    if (this.opts.clearSystemFiles) {
      await utils.clearLogs(LOG_LOCATIONS);
    } else {
      _logger.default.debug('Not clearing log files. Use `clearSystemFiles` capability to turn on.');
    }

    if (this.isRealDevice()) {
      await (0, _device.runRealDeviceReset)(this.realDevice, this.opts);
    } else {
      await (0, _device.runSimulatorReset)(this.sim, this.opts, this.keepAppToRetainPrefs);
    }

    await super.deleteSession();
  }

  async getSession() {
    let caps = await super.getSession();
    const viewportRect = await this.getViewportRect();
    const pixelRatio = await this.getDevicePixelRatio();
    const statBarHeight = await this.getStatusBarHeight();
    caps.viewportRect = viewportRect;
    caps.pixelRatio = pixelRatio;
    caps.statBarHeight = statBarHeight;
    return caps;
  }

  async executeCommand(cmd, ...args) {
    _logger.default.debug(`Executing iOS command '${cmd}'`);

    if (cmd === 'receiveAsyncResponse') {
      return await this.receiveAsyncResponse(...args);
    } else if (this.ready || _lodash.default.includes(['launchApp'], cmd)) {
      return await super.executeCommand(cmd, ...args);
    }

    throw new _appiumBaseDriver.errors.NoSuchDriverError(`Driver is not ready, cannot execute ${cmd}.`);
  }

  async configureApp() {
    try {
      if (!this.opts.bundleId && utils.appIsPackageOrBundle(this.opts.app)) {
        this.opts.bundleId = this.opts.app;
      }

      if (this.opts.app && this.opts.app.toLowerCase() === 'settings') {
        if (parseFloat(this.opts.platformVersion) >= 8) {
          _logger.default.debug('We are on iOS8+ so not copying preferences app');

          this.opts.bundleId = 'com.apple.Preferences';
          this.opts.app = null;
        }
      } else if (this.opts.app && this.opts.app.toLowerCase() === 'calendar') {
        if (parseFloat(this.opts.platformVersion) >= 8) {
          _logger.default.debug('We are on iOS8+ so not copying calendar app');

          this.opts.bundleId = 'com.apple.mobilecal';
          this.opts.app = null;
        }
      } else if (this.isSafari()) {
        if (!this.isRealDevice()) {
          if (parseFloat(this.opts.platformVersion) >= 8) {
            _logger.default.debug('We are on iOS8+ so not copying Safari app');

            this.opts.bundleId = _safari.SAFARI_BUNDLE;
            this.opts.app = null;
          }
        } else {
          if (!(await this.realDevice.isInstalled(this.opts.bundleId))) {
            if (await (0, _safariLauncher.needsInstall)()) {
              _logger.default.debug('SafariLauncher not found, building...');

              await (0, _safariLauncher.install)();
            }

            this.opts.bundleId = _safariLauncher.SAFARI_LAUNCHER_BUNDLE;
          }
        }
      } else if (this.opts.bundleId && utils.appIsPackageOrBundle(this.opts.bundleId) && (this.opts.app === '' || utils.appIsPackageOrBundle(this.opts.app))) {
        _logger.default.debug('App is an iOS bundle, will attempt to run as pre-existing');
      } else {
        this.opts.app = await this.helpers.configureApp(this.opts.app, '.app');
      }
    } catch (err) {
      _logger.default.error(err);

      throw new Error(`Bad app: ${this.opts.app}. App paths need to be absolute, or relative to the appium ` + 'server install dir, or a URL to compressed file, or a special app name.');
    }
  }

  async startSimulator() {
    await utils.removeInstrumentsSocket(this.sock);

    if (!this.xcodeVersion) {
      _logger.default.debug('Setting Xcode version');

      this.xcodeVersion = await utils.getAndCheckXcodeVersion(this.opts);

      _logger.default.debug(`Xcode version set to ${this.xcodeVersion.versionString}`);
    }

    _logger.default.debug('Setting iOS SDK Version');

    this.iosSdkVersion = await utils.getAndCheckIosSdkVersion();

    _logger.default.debug(`iOS SDK Version set to ${this.iosSdkVersion}`);

    let timeout = _lodash.default.isObject(this.opts.launchTimeout) ? this.opts.launchTimeout.global : this.opts.launchTimeout;
    let availableDevices = await (0, _asyncbox.retry)(3, _instruments.instrumentsUtils.getAvailableDevices, timeout);
    let iosSimUdid = await (0, _device.checkSimulatorAvailable)(this.opts, this.iosSdkVersion, availableDevices);
    this.sim = await (0, _appiumIosSimulator.getSimulator)(iosSimUdid, this.xcodeVersion.versionString);
    await (0, _device.moveBuiltInApp)(this.sim);
    this.opts.localizableStrings = await utils.parseLocalizableStrings(this.opts);
    await utils.setBundleIdFromApp(this.opts);
    await this.createInstruments();
    {
      this.shouldPrelaunchSimulator = utils.shouldPrelaunchSimulator(this.opts, this.iosSdkVersion);
      let dString = await (0, _device.getAdjustedDeviceName)(this.opts);

      if (this.caps.app) {
        await utils.setDeviceTypeInInfoPlist(this.opts.app, dString);
      }
    }
    await (0, _device.runSimulatorReset)(this.sim, this.opts, this.keepAppToRetainPrefs);

    if (this.caps.customSSLCert && !this.isRealDevice()) {
      await (0, _appiumIosSimulator.installSSLCert)(this.caps.customSSLCert, this.sim.udid);
    }

    if (this.opts.enableAsyncExecuteFromHttps && !this.isRealDevice()) {
      await this.startHttpsAsyncServer();
    }

    await (0, _device.isolateSimulatorDevice)(this.sim, this.opts);
    this.localConfig = await (0, _settings.setLocaleAndPreferences)(this.sim, this.opts, this.isSafari(), _device.endSimulator);
    await this.setUpLogCapture();
    await this.prelaunchSimulator();
    await this.startInstruments();
    await this.onInstrumentsLaunch();
    await this.configureBootstrap();
    await this.setBundleId();
    await this.setInitialOrientation();
    await this.initAutoWebview();
    await this.waitForAppLaunched();
  }

  async startRealDevice() {
    await utils.removeInstrumentsSocket(this.sock);
    this.opts.localizableStrings = await utils.parseLocalizableStrings(this.opts);
    await utils.setBundleIdFromApp(this.opts);
    await this.createInstruments();
    await (0, _device.runRealDeviceReset)(this.realDevice, this.opts);
    await this.setUpLogCapture();
    await this.installToRealDevice();
    await this.startInstruments();
    await this.onInstrumentsLaunch();
    await this.configureBootstrap();
    await this.setBundleId();
    await this.setInitialOrientation();
    await this.initAutoWebview();
    await this.waitForAppLaunched();
  }

  async installToRealDevice() {
    if (this.opts.autoLaunch === false) {
      return;
    }

    if (this.opts.app) {
      let ext = this.opts.app.substring(this.opts.app.length - 3).toLowerCase();

      if (ext === 'ipa') {
        this.opts.ipa = this.opts.app;
      }
    }

    if (this.opts.udid) {
      if (await this.realDevice.isInstalled(this.opts.bundleId)) {
        _logger.default.debug('App is installed.');

        if (this.opts.fullReset) {
          _logger.default.debug('fullReset requested. Forcing app install.');
        } else {
          _logger.default.debug('fullReset not requested. No need to install.');

          return;
        }
      } else {
        _logger.default.debug('App is not installed. Will try to install.');
      }

      if (this.opts.ipa && this.opts.bundleId) {
        await this.installIpa();

        _logger.default.debug('App installed.');
      } else if (this.opts.ipa) {
        let msg = 'You specified a UDID and ipa but did not include the bundle id';

        _logger.default.warn(msg);

        throw new _appiumBaseDriver.errors.UnknownError(msg);
      } else if (this.opts.app) {
        await this.realDevice.install(this.opts.app);

        _logger.default.debug('App installed.');
      } else {
        _logger.default.debug('Real device specified but no ipa or app path, assuming bundle ID is ' + 'on device');
      }
    } else {
      _logger.default.debug('No device id or app, not installing to real device.');
    }
  }

  getIDeviceObj() {
    let idiPath = _path.default.resolve(__dirname, '../../../build/', 'libimobiledevice-macosx/ideviceinstaller');

    _logger.default.debug(`Creating iDevice object with udid ${this.opts.udid}`);

    try {
      return iDevice(this.opts.udid);
    } catch (e1) {
      _logger.default.debug(`Couldn't find ideviceinstaller, trying built-in at ${idiPath}`);

      try {
        return iDevice(this.opts.udid, {
          cmd: idiPath
        });
      } catch (e2) {
        let msg = 'Could not initialize ideviceinstaller; make sure it is ' + 'installed and works on your system';

        _logger.default.error(msg);

        throw new Error(msg);
      }
    }
  }

  async installIpa() {
    _logger.default.debug(`Installing ipa found at ${this.opts.ipa}`);

    if (await this.realDevice.isInstalled(this.opts.bundleId)) {
      _logger.default.debug('Bundle found on device, removing before reinstalling.');

      await this.realDevice.remove(this.opts.bundleId);
    } else {
      _logger.default.debug('Nothing found on device, going ahead and installing.');
    }

    await this.realDevice.installAndWait(this.opts.ipa, this.opts.bundleId);
  }

  validateDesiredCaps(caps) {
    let res = super.validateDesiredCaps(caps);
    if (!res) return res;
    return (0, _desiredCaps.desiredCapValidation)(caps);
  }

  async prelaunchSimulator() {
    if (!this.shouldPrelaunchSimulator) {
      _logger.default.debug('Not pre-launching simulator');

      return;
    }

    await (0, _device.endSimulator)(this.sim);
  }

  async onInstrumentsLaunch() {
    _logger.default.debug('Instruments launched. Starting poll loop for new commands.');

    if (this.opts.origAppPath) {
      _logger.default.debug('Copying app back to its original place');

      return await _appiumSupport.fs.copyFile(this.opts.app, this.opts.origAppPath);
    }
  }

  async setBundleId() {
    if (this.opts.bundleId) {
      return;
    } else {
      let bId = await this.uiAutoClient.sendCommand('au.bundleId()');

      _logger.default.debug(`Bundle ID for open app is ${bId.value}`);

      this.opts.bundleId = bId.value;
    }
  }

  async startIWDP() {
    if (this.opts.startIWDP) {
      this.iwdpServer = new _iwdp.IWDP({
        webkitDebugProxyPort: this.opts.webkitDebugProxyPort,
        udid: this.opts.udid,
        logStdout: !!this.opts.showIWDPLog
      });
      await this.iwdpServer.start();
    }
  }

  async stopIWDP() {
    if (this.iwdpServer) {
      await this.iwdpServer.stop();
      delete this.iwdpServer;
    }
  }

  async setInitialOrientation() {
    if (_lodash.default.isString(this.opts.initialOrientation) && _lodash.default.includes(['LANDSCAPE', 'PORTRAIT'], this.opts.initialOrientation.toUpperCase())) {
      _logger.default.debug(`Setting initial orientation to ${this.opts.initialOrientation}`);

      let command = `au.setScreenOrientation('${this.opts.initialOrientation.toUpperCase()}')`;

      try {
        await this.uiAutoClient.sendCommand(command);
        this.opts.curOrientation = this.opts.initialOrientation;
      } catch (err) {
        _logger.default.warn(`Setting initial orientation failed with: ${err}`);
      }
    }
  }

  isRealDevice() {
    return !!this.opts.udid;
  }

  isSafari() {
    return this.opts.safari;
  }

  async waitForAppLaunched() {
    let condFn;

    if (this.opts.waitForAppScript) {
      _logger.default.debug(`Using custom script to wait for app start: ${this.opts.waitForAppScript}`);

      condFn = async () => {
        let res;

        try {
          res = await this.uiAutoClient.sendCommand(`try{\n${this.opts.waitForAppScript}` + `\n} catch(err) { $.log("waitForAppScript err: " + error); false; };`);
        } catch (err) {
          _logger.default.debug(`Cannot eval waitForAppScript script, err: ${err}`);

          return false;
        }

        if (typeof res !== 'boolean') {
          _logger.default.debug('Unexpected return type in waitForAppScript script');

          return false;
        }

        return res;
      };
    } else if (this.isSafari()) {
      if (this.isRealDevice()) {
        await this.clickButtonToLaunchSafari();
      }

      _logger.default.debug('Waiting for initial webview');

      await this.navToInitialWebview();

      condFn = async () => true;
    } else {
      _logger.default.debug('Waiting for app source to contain elements');

      condFn = async () => {
        try {
          let source = await this.getSourceForElementForXML();
          source = JSON.parse(source || '{}');
          let appEls = (source.UIAApplication || {})['>'];
          return appEls && appEls.length > 0 && !IosDriver.isSpringBoard(source.UIAApplication);
        } catch (e) {
          _logger.default.warn(`Couldn't extract app element from source, error was: ${e}`);

          return false;
        }
      };
    }

    try {
      await (0, _asyncbox.waitForCondition)(condFn, {
        logger: _logger.default,
        waitMs: 10000,
        intervalMs: 500
      });
    } catch (err) {
      if (err.message && err.message.match(/Condition unmet/)) {
        _logger.default.warn('Initial spin timed out, continuing but the app might not be ready.');

        _logger.default.debug(`Initial spin error was: ${err}`);
      } else {
        throw err;
      }
    }
  }

  static isSpringBoard(uiAppObj) {
    return _lodash.default.propertyOf(uiAppObj['@'])('name') === 'SpringBoard';
  }

  async createInstruments() {
    _logger.default.debug('Creating instruments');

    this.uiAutoClient = new _uiauto.UIAutoClient(this.sock);
    this.instruments = await this.makeInstruments();
    this.instruments.onShutdown.catch(async () => {
      await this.startUnexpectedShutdown(new _appiumBaseDriver.errors.UnknownError('Abnormal Instruments termination!'));
    }).done();
  }

  shouldIgnoreInstrumentsExit() {
    return this.safari && this.isRealDevice();
  }

  async makeInstruments() {
    let bootstrapPath = await (0, _uiauto.prepareBootstrap)({
      sock: this.sock,
      interKeyDelay: this.opts.interKeyDelay,
      justLoopInfinitely: false,
      autoAcceptAlerts: this.opts.autoAcceptAlerts,
      autoDismissAlerts: this.opts.autoDismissAlerts,
      sendKeyStrategy: this.opts.sendKeyStrategy || (this.isRealDevice() ? 'grouped' : 'oneByOne')
    });
    let instruments = new _instruments.Instruments({
      app: (!this.isRealDevice() ? this.opts.app : null) || this.opts.bundleId,
      udid: this.opts.udid,
      processArguments: this.opts.processArguments,
      ignoreStartupExit: this.shouldIgnoreInstrumentsExit(),
      bootstrap: bootstrapPath,
      template: this.opts.automationTraceTemplatePath,
      instrumentsPath: this.opts.instrumentsPath,
      withoutDelay: this.opts.withoutDelay,
      platformVersion: this.opts.platformVersion,
      webSocket: this.opts.webSocket,
      launchTimeout: this.opts.launchTimeout,
      flakeyRetries: this.opts.backendRetries,
      realDevice: this.isRealDevice(),
      simulatorSdkAndDevice: this.iosSdkVersion >= 7.1 ? await (0, _device.getAdjustedDeviceName)(this.opts) : null,
      tmpDir: _path.default.resolve(this.opts.tmpDir || '/tmp', 'appium-instruments'),
      traceDir: this.opts.traceDir,
      locale: this.opts.locale,
      language: this.opts.language
    });
    return instruments;
  }

  async startInstruments() {
    _logger.default.debug('Starting UIAutoClient, and launching Instruments.');

    await _bluebird.default.all([this.uiAutoClient.start().then(() => {
      this.instruments.registerLaunch();
    }), this.instruments.launch()]);
  }

  async configureBootstrap() {
    _logger.default.debug('Setting bootstrap config keys/values');

    let isVerbose = true;
    let cmd = 'target = $.target();\n';
    cmd += 'au = $;\n';
    cmd += `$.isVerbose = ${isVerbose};\n`;
    await this.uiAutoClient.sendCommand(cmd);
  }

  async getSourceForElementForXML(ctx) {
    let source;

    if (!ctx) {
      source = await this.uiAutoClient.sendCommand('au.mainApp().getTreeForXML()');
    } else {
      source = await this.uiAutoClient.sendCommand(`au.getElement('${ctx}').getTreeForXML()`);
    }

    if (source) {
      return JSON.stringify(source);
    } else {
      throw new Error(`Bad response from getTreeForXML. res was ${JSON.stringify(source)}`);
    }
  }

  async setUpLogCapture() {
    if (this.caps.skipLogCapture) {
      _logger.default.info("'skipLogCapture' is set. Skipping the collection of system logs and crash reports.");

      return;
    }

    if (this.isRealDevice()) {
      await this.startLogCapture();
    } else {
      await this.startLogCapture(this.sim);
    }
  }

  get realDevice() {
    this._realDevice = this._realDevice || this.getIDeviceObj();
    return this._realDevice;
  }

  set realDevice(rd) {
    this._realDevice = rd;
  }

}

exports.IosDriver = IosDriver;

for (let [cmd, fn] of _lodash.default.toPairs(_index.default)) {
  IosDriver.prototype[cmd] = fn;
}

var _default = IosDriver;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9kcml2ZXIuanMiXSwibmFtZXMiOlsiaURldmljZSIsImFyZ3MiLCJkZXZpY2UiLCJwcm9taXNpZmllZCIsIm0iLCJCIiwicHJvbWlzaWZ5IiwiYmluZCIsImRlZmF1bHRTZXJ2ZXJDYXBzIiwid2ViU3RvcmFnZUVuYWJsZWQiLCJsb2NhdGlvbkNvbnRleHRFbmFibGVkIiwiYnJvd3Nlck5hbWUiLCJwbGF0Zm9ybSIsImphdmFzY3JpcHRFbmFibGVkIiwiZGF0YWJhc2VFbmFibGVkIiwidGFrZXNTY3JlZW5zaG90IiwibmV0d29ya0Nvbm5lY3Rpb25FbmFibGVkIiwiTE9HX0xPQ0FUSU9OUyIsInBhdGgiLCJyZXNvbHZlIiwicHJvY2VzcyIsImVudiIsIkhPTUUiLCJwdXNoIiwiSW9zRHJpdmVyIiwiQmFzZURyaXZlciIsInJlc2V0SW9zIiwiYXBwRXh0IiwieGNvZGVWZXJzaW9uIiwiaW9zU2RrVmVyc2lvbiIsImxvZ3MiLCJpbnN0cnVtZW50cyIsInVpQXV0b0NsaWVudCIsIm9uSW5zdHJ1bWVudHNEaWUiLCJzdG9wcGluZyIsImNiRm9yQ3VycmVudENtZCIsInJlbW90ZSIsImN1ckNvbnRleHQiLCJjdXJXZWJGcmFtZXMiLCJzZWxlY3RpbmdOZXdQYWdlIiwid2luZG93SGFuZGxlQ2FjaGUiLCJ3ZWJFbGVtZW50SWRzIiwiaW1wbGljaXRXYWl0TXMiLCJhc3luY2xpYldhaXRNcyIsInBhZ2VMb2FkTXMiLCJhc3luY2xpYlJlc3BvbnNlQ2IiLCJyZXR1cm5lZEZyb21FeGVjdXRlQXRvbSIsImV4ZWN1dGVkQXRvbXNDb3VudGVyIiwiY3VyQ29vcmRzIiwiY3VyV2ViQ29vcmRzIiwibGFuZHNjYXBlV2ViQ29vcmRzT2Zmc2V0Iiwia2VlcEFwcFRvUmV0YWluUHJlZnMiLCJyZWFkeSIsImFzeW5jV2FpdE1zIiwic2V0dGluZ3MiLCJEZXZpY2VTZXR0aW5ncyIsIl8iLCJub29wIiwibG9jYXRvclN0cmF0ZWdpZXMiLCJ3ZWJMb2NhdG9yU3RyYXRlZ2llcyIsImNvbnN0cnVjdG9yIiwib3B0cyIsInNob3VsZFZhbGlkYXRlQ2FwcyIsImRlc2lyZWRDYXBDb25zdHJhaW50cyIsImdldERldmljZVBpeGVsUmF0aW8iLCJtZW1vaXplIiwidmFsaWRhdGVMb2NhdG9yU3RyYXRlZ3kiLCJzdHJhdGVneSIsImlzV2ViQ29udGV4dCIsInN0YXJ0IiwiaXNSZWFsRGV2aWNlIiwic3RhcnRSZWFsRGV2aWNlIiwic3RhcnRTaW11bGF0b3IiLCJjcmVhdGVTZXNzaW9uIiwic2Vzc2lvbklkIiwiY2FwcyIsInV0aWxzIiwiZ2V0QW5kQ2hlY2tYY29kZVZlcnNpb24iLCJsb2dnZXIiLCJkZWJ1ZyIsInZlcnNpb25TdHJpbmciLCJtYWpvciIsIm1zZyIsImVycm9yQW5kVGhyb3ciLCJlcnJvcnMiLCJTZXNzaW9uTm90Q3JlYXRlZEVycm9yIiwiT2JqZWN0IiwiYXNzaWduIiwiZGVzaXJlZCIsImRldGVjdFVkaWQiLCJwcmVwYXJlSW9zT3B0cyIsInJlYWxEZXZpY2UiLCJ1c2VSb2JvdCIsInNhZmFyaSIsImN1ck9yaWVudGF0aW9uIiwiaW5pdGlhbE9yaWVudGF0aW9uIiwic29jayIsInRtcERpciIsImNvbmZpZ3VyZUFwcCIsImVyciIsImVycm9yIiwiYXBwIiwic3RhcnROZXdDb21tYW5kVGltZW91dCIsInN0b3AiLCJzaHV0ZG93biIsImN1c3RvbVNTTENlcnQiLCJzaW0iLCJ1ZGlkIiwiZW5hYmxlQXN5bmNFeGVjdXRlRnJvbUh0dHBzIiwic3RvcEh0dHBzQXN5bmNTZXJ2ZXIiLCJpc0VtcHR5Iiwic3lzbG9nIiwic3RvcENhcHR1cmUiLCJzdG9wUmVtb3RlIiwic3RvcElXRFAiLCJkZWxldGVTZXNzaW9uIiwiY2xlYXJTeXN0ZW1GaWxlcyIsImNsZWFyTG9ncyIsImdldFNlc3Npb24iLCJ2aWV3cG9ydFJlY3QiLCJnZXRWaWV3cG9ydFJlY3QiLCJwaXhlbFJhdGlvIiwic3RhdEJhckhlaWdodCIsImdldFN0YXR1c0JhckhlaWdodCIsImV4ZWN1dGVDb21tYW5kIiwiY21kIiwicmVjZWl2ZUFzeW5jUmVzcG9uc2UiLCJpbmNsdWRlcyIsIk5vU3VjaERyaXZlckVycm9yIiwiYnVuZGxlSWQiLCJhcHBJc1BhY2thZ2VPckJ1bmRsZSIsInRvTG93ZXJDYXNlIiwicGFyc2VGbG9hdCIsInBsYXRmb3JtVmVyc2lvbiIsImlzU2FmYXJpIiwiU0FGQVJJX0JVTkRMRSIsImlzSW5zdGFsbGVkIiwiU0FGQVJJX0xBVU5DSEVSX0JVTkRMRSIsImhlbHBlcnMiLCJFcnJvciIsInJlbW92ZUluc3RydW1lbnRzU29ja2V0IiwiZ2V0QW5kQ2hlY2tJb3NTZGtWZXJzaW9uIiwidGltZW91dCIsImlzT2JqZWN0IiwibGF1bmNoVGltZW91dCIsImdsb2JhbCIsImF2YWlsYWJsZURldmljZXMiLCJpbnN0cnVtZW50c1V0aWxzIiwiZ2V0QXZhaWxhYmxlRGV2aWNlcyIsImlvc1NpbVVkaWQiLCJsb2NhbGl6YWJsZVN0cmluZ3MiLCJwYXJzZUxvY2FsaXphYmxlU3RyaW5ncyIsInNldEJ1bmRsZUlkRnJvbUFwcCIsImNyZWF0ZUluc3RydW1lbnRzIiwic2hvdWxkUHJlbGF1bmNoU2ltdWxhdG9yIiwiZFN0cmluZyIsInNldERldmljZVR5cGVJbkluZm9QbGlzdCIsInN0YXJ0SHR0cHNBc3luY1NlcnZlciIsImxvY2FsQ29uZmlnIiwiZW5kU2ltdWxhdG9yIiwic2V0VXBMb2dDYXB0dXJlIiwicHJlbGF1bmNoU2ltdWxhdG9yIiwic3RhcnRJbnN0cnVtZW50cyIsIm9uSW5zdHJ1bWVudHNMYXVuY2giLCJjb25maWd1cmVCb290c3RyYXAiLCJzZXRCdW5kbGVJZCIsInNldEluaXRpYWxPcmllbnRhdGlvbiIsImluaXRBdXRvV2VidmlldyIsIndhaXRGb3JBcHBMYXVuY2hlZCIsImluc3RhbGxUb1JlYWxEZXZpY2UiLCJhdXRvTGF1bmNoIiwiZXh0Iiwic3Vic3RyaW5nIiwibGVuZ3RoIiwiaXBhIiwiZnVsbFJlc2V0IiwiaW5zdGFsbElwYSIsIndhcm4iLCJVbmtub3duRXJyb3IiLCJpbnN0YWxsIiwiZ2V0SURldmljZU9iaiIsImlkaVBhdGgiLCJfX2Rpcm5hbWUiLCJlMSIsImUyIiwicmVtb3ZlIiwiaW5zdGFsbEFuZFdhaXQiLCJ2YWxpZGF0ZURlc2lyZWRDYXBzIiwicmVzIiwib3JpZ0FwcFBhdGgiLCJmcyIsImNvcHlGaWxlIiwiYklkIiwic2VuZENvbW1hbmQiLCJ2YWx1ZSIsInN0YXJ0SVdEUCIsIml3ZHBTZXJ2ZXIiLCJJV0RQIiwid2Via2l0RGVidWdQcm94eVBvcnQiLCJsb2dTdGRvdXQiLCJzaG93SVdEUExvZyIsImlzU3RyaW5nIiwidG9VcHBlckNhc2UiLCJjb21tYW5kIiwiY29uZEZuIiwid2FpdEZvckFwcFNjcmlwdCIsImNsaWNrQnV0dG9uVG9MYXVuY2hTYWZhcmkiLCJuYXZUb0luaXRpYWxXZWJ2aWV3Iiwic291cmNlIiwiZ2V0U291cmNlRm9yRWxlbWVudEZvclhNTCIsIkpTT04iLCJwYXJzZSIsImFwcEVscyIsIlVJQUFwcGxpY2F0aW9uIiwiaXNTcHJpbmdCb2FyZCIsImUiLCJ3YWl0TXMiLCJpbnRlcnZhbE1zIiwibWVzc2FnZSIsIm1hdGNoIiwidWlBcHBPYmoiLCJwcm9wZXJ0eU9mIiwiVUlBdXRvQ2xpZW50IiwibWFrZUluc3RydW1lbnRzIiwib25TaHV0ZG93biIsImNhdGNoIiwic3RhcnRVbmV4cGVjdGVkU2h1dGRvd24iLCJkb25lIiwic2hvdWxkSWdub3JlSW5zdHJ1bWVudHNFeGl0IiwiYm9vdHN0cmFwUGF0aCIsImludGVyS2V5RGVsYXkiLCJqdXN0TG9vcEluZmluaXRlbHkiLCJhdXRvQWNjZXB0QWxlcnRzIiwiYXV0b0Rpc21pc3NBbGVydHMiLCJzZW5kS2V5U3RyYXRlZ3kiLCJJbnN0cnVtZW50cyIsInByb2Nlc3NBcmd1bWVudHMiLCJpZ25vcmVTdGFydHVwRXhpdCIsImJvb3RzdHJhcCIsInRlbXBsYXRlIiwiYXV0b21hdGlvblRyYWNlVGVtcGxhdGVQYXRoIiwiaW5zdHJ1bWVudHNQYXRoIiwid2l0aG91dERlbGF5Iiwid2ViU29ja2V0IiwiZmxha2V5UmV0cmllcyIsImJhY2tlbmRSZXRyaWVzIiwic2ltdWxhdG9yU2RrQW5kRGV2aWNlIiwidHJhY2VEaXIiLCJsb2NhbGUiLCJsYW5ndWFnZSIsImFsbCIsInRoZW4iLCJyZWdpc3RlckxhdW5jaCIsImxhdW5jaCIsImlzVmVyYm9zZSIsImN0eCIsInN0cmluZ2lmeSIsInNraXBMb2dDYXB0dXJlIiwiaW5mbyIsInN0YXJ0TG9nQ2FwdHVyZSIsIl9yZWFsRGV2aWNlIiwicmQiLCJmbiIsInRvUGFpcnMiLCJjb21tYW5kcyIsInByb3RvdHlwZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUlBLElBQUlBLE9BQU8sR0FBRyxVQUFVLEdBQUdDLElBQWIsRUFBbUI7QUFDL0IsTUFBSUMsTUFBTSxHQUFHLDBCQUFTLEdBQUdELElBQVosQ0FBYjtBQUNBLE1BQUlFLFdBQVcsR0FBRyxFQUFsQjs7QUFDQSxPQUFLLElBQUlDLENBQVQsSUFBYyxDQUFDLFNBQUQsRUFBWSxnQkFBWixFQUE4QixRQUE5QixFQUF3QyxhQUF4QyxDQUFkLEVBQXNFO0FBQ3BFRCxJQUFBQSxXQUFXLENBQUNDLENBQUQsQ0FBWCxHQUFpQkMsa0JBQUVDLFNBQUYsQ0FBWUosTUFBTSxDQUFDRSxDQUFELENBQU4sQ0FBVUcsSUFBVixDQUFlTCxNQUFmLENBQVosQ0FBakI7QUFDRDs7QUFDRCxTQUFPQyxXQUFQO0FBQ0QsQ0FQRDs7QUFTQSxNQUFNSyxpQkFBaUIsR0FBRztBQUN4QkMsRUFBQUEsaUJBQWlCLEVBQUUsS0FESztBQUV4QkMsRUFBQUEsc0JBQXNCLEVBQUUsS0FGQTtBQUd4QkMsRUFBQUEsV0FBVyxFQUFFLEVBSFc7QUFJeEJDLEVBQUFBLFFBQVEsRUFBRSxLQUpjO0FBS3hCQyxFQUFBQSxpQkFBaUIsRUFBRSxJ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LEdBQW1CQyxFQUFuQjtBQUNEOztBQWpwQmdDOzs7O0FBb3BCbkMsS0FBSyxJQUFJLENBQUN4SSxHQUFELEVBQU15SSxFQUFOLENBQVQsSUFBc0I5TSxnQkFBRStNLE9BQUYsQ0FBVUMsY0FBVixDQUF0QixFQUEyQztBQUN6Q2hQLEVBQUFBLFNBQVMsQ0FBQ2lQLFNBQVYsQ0FBb0I1SSxHQUFwQixJQUEyQnlJLEVBQTNCO0FBQ0Q7O2VBSWM5TyxTIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZURyaXZlciwgRGV2aWNlU2V0dGluZ3MsIGVycm9ycyB9IGZyb20gJ2FwcGl1bS1iYXNlLWRyaXZlcic7XG5pbXBvcnQgKiBhcyB1dGlscyBmcm9tICcuL3V0aWxzJztcbmltcG9ydCBsb2dnZXIgZnJvbSAnLi9sb2dnZXInO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHsgZnMgfSBmcm9tICdhcHBpdW0tc3VwcG9ydCc7XG5pbXBvcnQgeyBnZXRTaW11bGF0b3IsIGluc3RhbGxTU0xDZXJ0LCB1bmluc3RhbGxTU0xDZXJ0IH0gZnJvbSAnYXBwaXVtLWlvcy1zaW11bGF0b3InO1xuaW1wb3J0IHsgcHJlcGFyZUJvb3RzdHJhcCwgVUlBdXRvQ2xpZW50IH0gZnJvbSAnLi91aWF1dG8vdWlhdXRvJztcbmltcG9ydCB7IEluc3RydW1lbnRzLCBpbnN0cnVtZW50c1V0aWxzIH0gZnJvbSAnLi9pbnN0cnVtZW50cyc7XG5pbXBvcnQgeyByZXRyeSwgd2FpdEZvckNvbmRpdGlvbiB9IGZyb20gJ2FzeW5jYm94JztcbmltcG9ydCBjb21tYW5kcyBmcm9tICcuL2NvbW1hbmRzL2luZGV4JztcbmltcG9ydCB7IGRlc2lyZWRDYXBDb25zdHJhaW50cywgZGVzaXJlZENhcFZhbGlkYXRpb24gfSBmcm9tICcuL2Rlc2lyZWQtY2Fwcyc7XG5pbXBvcnQgX2lEZXZpY2UgZnJvbSAnbm9kZS1pZGV2aWNlJztcbmltcG9ydCB7IFNBRkFSSV9CVU5ETEUgfSBmcm9tICcuL2NvbW1hbmRzL3NhZmFyaSc7XG5pbXBvcnQgeyBpbnN0YWxsLCBuZWVkc0luc3RhbGwsIFNBRkFSSV9MQVVOQ0hFUl9CVU5ETEUgfSBmcm9tICcuL3NhZmFyaS1sYXVuY2hlcic7XG5pbXBvcnQgeyBzZXRMb2NhbGVBbmRQcmVmZXJlbmNlcyB9IGZyb20gJy4vc2V0dGluZ3MnO1xuaW1wb3J0IHsgcnVuU2ltdWxhdG9yUmVzZXQsIGlzb2xhdGVTaW11bGF0b3JEZXZpY2UsIGNoZWNrU2ltdWxhdG9yQXZhaWxhYmxlLFxuICAgICAgICAgbW92ZUJ1aWx0SW5BcHAsIGdldEFkanVzdGVkRGV2aWNlTmFtZSwgZW5kU2ltdWxhdG9yLCBydW5SZWFsRGV2aWNlUmVzZXQgfSBmcm9tICcuL2RldmljZSc7XG5pbXBvcnQgeyBJV0RQIH0gZnJvbSAnLi9pd2RwJztcblxuXG4vLyBwcm9taXNpZnkgX2lEZXZpY2VcbmxldCBpRGV2aWNlID0gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgbGV0IGRldmljZSA9IF9pRGV2aWNlKC4uLmFyZ3MpO1xuICBsZXQgcHJvbWlzaWZpZWQgPSB7fTtcbiAgZm9yIChsZXQgbSBvZiBbJ2luc3RhbGwnLCAnaW5zdGFsbEFuZFdhaXQnLCAncmVtb3ZlJywgJ2lzSW5zdGFsbGVkJ10pIHtcbiAgICBwcm9taXNpZmllZFttXSA9IEIucHJvbWlzaWZ5KGRldmljZVttXS5iaW5kKGRldmljZSkpO1xuICB9XG4gIHJldHVybiBwcm9taXNpZmllZDtcbn07XG5cbmNvbnN0IGRlZmF1bHRTZXJ2ZXJDYXBzID0ge1xuICB3ZWJTdG9yYWdlRW5hYmxlZDogZmFsc2UsXG4gIGxvY2F0aW9uQ29udGV4dEVuYWJsZWQ6IGZhbHNlLFxuICBicm93c2VyTmFtZTogJycsXG4gIHBsYXRmb3JtOiAnTUFDJyxcbiAgamF2YXNjcmlwdEVuYWJsZWQ6IHRydWUsXG4gIGRhdGFiYXNlRW5hYmxlZDogZmFsc2UsXG4gIHRha2VzU2NyZWVuc2hvdDogdHJ1ZSxcbiAgbmV0d29ya0Nvbm5lY3Rpb25FbmFibGVkOiBmYWxzZSxcbn07XG5cbmNvbnN0IExPR19MT0NBVElPTlMgPSBbXG4gIHBhdGgucmVzb2x2ZSgnLycsICdMaWJyYXJ5JywgJ0NhY2hlcycsICdjb20uYXBwbGUuZHQuaW5zdHJ1bWVudHMnKSxcbl07XG5pZiAocHJvY2Vzcy5lbnYuSE9NRSkge1xuICBMT0dfTE9DQVRJT05TLnB1c2gocGF0aC5yZXNvbHZlKHByb2Nlc3MuZW52LkhPTUUsICdMaWJyYXJ5JywgJ0xvZ3MnLCAnQ29yZVNpbXVsYXRvcicpKTtcbn1cblxuY2xhc3MgSW9zRHJpdmVyIGV4dGVuZHMgQmFzZURyaXZlciB7XG4gIHJlc2V0SW9zICgpIHtcbiAgICB0aGlzLmFwcEV4dCA9ICcuYXBwJztcbiAgICB0aGlzLnhjb2RlVmVyc2lvbiA9IG51bGw7XG4gICAgdGhpcy5pb3NTZGtWZXJzaW9uID0gbnVsbDtcbiAgICB0aGlzLmxvZ3MgPSB7fTtcbiAgICB0aGlzLmluc3RydW1lbnRzID0gbnVsbDtcbiAgICB0aGlzLnVpQXV0b0NsaWVudCA9IG51bGw7XG4gICAgdGhpcy5vbkluc3RydW1lbnRzRGllID0gZnVuY3Rpb24gKCkge307XG4gICAgdGhpcy5zdG9wcGluZyA9IGZhbHNlO1xuICAgIHRoaXMuY2JGb3JDdXJyZW50Q21kID0gbnVsbDtcbiAgICB0aGlzLnJlbW90ZSA9IG51bGw7XG4gICAgdGhpcy5jdXJDb250ZXh0ID0gbnVsbDtcbiAgICB0aGlzLmN1cldlYkZyYW1lcyA9IFtdO1xuICAgIHRoaXMuc2VsZWN0aW5nTmV3UGFnZSA9IGZhbHNlO1xuICAgIHRoaXMud2luZG93SGFuZGxlQ2FjaGUgPSBbXTtcbiAgICB0aGlzLndlYkVsZW1lbnRJZHMgPSBbXTtcbiAgICB0aGlzLmltcGxpY2l0V2FpdE1zID0gMDtcbiAgICB0aGlzLmFzeW5jbGliV2FpdE1zID0gMDtcbiAgICB0aGlzLnBhZ2VMb2FkTXMgPSA2MDAwO1xuICAgIHRoaXMuYXN5bmNsaWJSZXNwb25zZUNiID0gbnVsbDtcbiAgICB0aGlzLnJldHVybmVkRnJvbUV4ZWN1dGVBdG9tID0ge307XG4gICAgdGhpcy5leGVjdXRlZEF0b21zQ291bnRlciA9IDA7XG4gICAgdGhpcy5jdXJDb29yZHMgPSBudWxsO1xuICAgIHRoaXMuY3VyV2ViQ29vcmRzID0gbnVsbDtcbiAgICB0aGlzLmxhbmRzY2FwZVdlYkNvb3Jkc09mZnNldCA9IDA7XG4gICAgdGhpcy5rZWVwQXBwVG9SZXRhaW5QcmVmcyA9IGZhbHNlO1xuICAgIHRoaXMucmVhZHkgPSBmYWxzZTtcbiAgICB0aGlzLmFzeW5jV2FpdE1zID0gMDtcblxuICAgIHRoaXMuc2V0dGluZ3MgPSBuZXcgRGV2aWNlU2V0dGluZ3Moe30sIF8ubm9vcCk7XG5cbiAgICB0aGlzLmxvY2F0b3JTdHJhdGVnaWVzID0gW1xuICAgICAgJ3hwYXRoJyxcbiAgICAgICdpZCcsXG4gICAgICAnY2xhc3MgbmFtZScsXG4gICAgICAnLWlvcyB1aWF1dG9tYXRpb24nLFxuICAgICAgJ2FjY2Vzc2liaWxpdHkgaWQnXG4gICAgXTtcbiAgICB0aGlzLndlYkxvY2F0b3JTdHJhdGVnaWVzID0gW1xuICAgICAgJ2xpbmsgdGV4dCcsXG4gICAgICAnY3NzIHNlbGVjdG9yJyxcbiAgICAgICd0YWcgbmFtZScsXG4gICAgICAncGFydGlhbCBsaW5rIHRleHQnXG4gICAgXTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yIChvcHRzLCBzaG91bGRWYWxpZGF0ZUNhcHMpIHtcbiAgICBzdXBlcihvcHRzLCBzaG91bGRWYWxpZGF0ZUNhcHMpO1xuXG4gICAgdGhpcy5kZXNpcmVkQ2FwQ29uc3RyYWludHMgPSBkZXNpcmVkQ2FwQ29uc3RyYWludHM7XG4gICAgdGhpcy5yZXNldElvcygpO1xuICAgIHRoaXMuZ2V0RGV2aWNlUGl4ZWxSYXRpbyA9IF8ubWVtb2l6ZSh0aGlzLmdldERldmljZVBpeGVsUmF0aW8pO1xuICB9XG5cbiAgdmFsaWRhdGVMb2NhdG9yU3RyYXRlZ3kgKHN0cmF0ZWd5KSB7XG4gICAgc3VwZXIudmFsaWRhdGVMb2NhdG9yU3RyYXRlZ3koc3RyYXRlZ3ksIHRoaXMuaXNXZWJDb250ZXh0KCkpO1xuICB9XG5cbiAgYXN5bmMgc3RhcnQgKCkge1xuICAgIGlmICh0aGlzLmlzUmVhbERldmljZSgpKSB7XG4gICAgICBhd2FpdCB0aGlzLnN0YXJ0UmVhbERldmljZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCB0aGlzLnN0YXJ0U2ltdWxhdG9yKCk7XG4gICAgfVxuICAgIHRoaXMucmVhZHkgPSB0cnVlO1xuICB9XG5cbiAgYXN5bmMgY3JlYXRlU2Vzc2lvbiAoLi4uYXJncykge1xuICAgIGxldCBbc2Vzc2lvbklkLCBjYXBzXSA9IGF3YWl0IHN1cGVyLmNyZWF0ZVNlc3Npb24oLi4uYXJncyk7XG5cbiAgICAvLyBhcHBpdW0taW9zLWRyaXZlciB1c2VzIEluc3RydW1lbnRzIHRvIGF1dG9tYXRlIHRoZSBkZXZpY2VcbiAgICAvLyBidXQgWGNvZGUgOCBkb2VzIG5vdCBoYXZlIEluc3RydW1lbnRzLCBzbyBzaG9ydCBjaXJjdWl0XG4gICAgdGhpcy54Y29kZVZlcnNpb24gPSBhd2FpdCB1dGlscy5nZXRBbmRDaGVja1hjb2RlVmVyc2lvbih0aGlzLm9wdHMpO1xuICAgIGxvZ2dlci5kZWJ1ZyhgWGNvZGUgdmVyc2lvbiBzZXQgdG8gJHt0aGlzLnhjb2RlVmVyc2lvbi52ZXJzaW9uU3RyaW5nfWApO1xuICAgIGlmICh0aGlzLnhjb2RlVmVyc2lvbi5tYWpvciA+PSA4KSB7XG4gICAgICBsZXQgbXNnID0gYEFwcGl1bSdzIElvc0RyaXZlciBkb2VzIG5vdCBzdXBwb3J0IFhjb2RlIHZlcnNpb24gJHt0aGlzLnhjb2RlVmVyc2lvbi52ZXJzaW9uU3RyaW5nfS4gYCArXG4gICAgICAgICAgICAgICAgJ0FwcGxlIGhhcyBkZXByZWNhdGVkIFVJQXV0b21hdGlvbi4gVXNlIHRoZSBcIlhDVUlUZXN0XCIgYXV0b21hdGlvbk5hbWUgY2FwYWJpbGl0eSBpbnN0ZWFkLic7XG4gICAgICBsb2dnZXIuZXJyb3JBbmRUaHJvdyhuZXcgZXJyb3JzLlNlc3Npb25Ob3RDcmVhdGVkRXJyb3IobXNnKSk7XG4gICAgfVxuXG4gICAgLy8gbWVyZ2Ugc2VydmVyIGNhcGFiaWxpdGllcyArIGRlc2lyZWQgY2FwYWJpbGl0aWVzXG4gICAgdGhpcy5jYXBzID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFNlcnZlckNhcHMsIHRoaXMuY2Fwcyk7XG4gICAgdGhpcy5jYXBzLmRlc2lyZWQgPSBjYXBzO1xuXG4gICAgYXdhaXQgdXRpbHMuZGV0ZWN0VWRpZCh0aGlzLm9wdHMpO1xuICAgIGF3YWl0IHV0aWxzLnByZXBhcmVJb3NPcHRzKHRoaXMub3B0cyk7XG4gICAgdGhpcy5yZWFsRGV2aWNlID0gbnVsbDtcbiAgICB0aGlzLnVzZVJvYm90ID0gdGhpcy5vcHRzLnVzZVJvYm90O1xuICAgIHRoaXMuc2FmYXJpID0gdGhpcy5vcHRzLnNhZmFyaTtcbiAgICB0aGlzLm9wdHMuY3VyT3JpZW50YXRpb24gPSB0aGlzLm9wdHMuaW5pdGlhbE9yaWVudGF0aW9uO1xuXG4gICAgdGhpcy5zb2NrID0gcGF0aC5yZXNvbHZlKHRoaXMub3B0cy50bXBEaXIgfHwgJy90bXAnLCAnaW5zdHJ1bWVudHNfc29jaycpO1xuXG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHRoaXMuY29uZmlndXJlQXBwKCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBsb2dnZXIuZXJyb3IoYEJhZCBhcHA6ICcke3RoaXMub3B0cy5hcHB9Jy4gQXBwIHBhdGhzIG5lZWQgdG8gYCArXG4gICAgICAgICAgICAgICAgICAgYGJlIGFic29sdXRlLCBvciByZWxhdGl2ZSB0byB0aGUgYXBwaXVtIHNlcnZlciBgICtcbiAgICAgICAgICAgICAgICAgICBgaW5zdGFsbCBkaXIsIG9yIGEgVVJMIHRvIGNvbXByZXNzZWQgZmlsZSwgb3IgYSBgICtcbiAgICAgICAgICAgICAgICAgICBgc3BlY2lhbCBhcHAgbmFtZS5gKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnN0YXJ0KCk7XG5cbiAgICAvLyBUT0RPOiB0aGlzIHNob3VsZCBiZSBpbiBCYXNlRHJpdmVyLnBvc3RDcmVhdGVTZXNzaW9uXG4gICAgdGhpcy5zdGFydE5ld0NvbW1hbmRUaW1lb3V0KCdjcmVhdGVTZXNzaW9uJyk7XG4gICAgcmV0dXJuIFtzZXNzaW9uSWQsIHRoaXMuY2Fwc107XG4gIH1cblxuICBhc3luYyBzdG9wICgpIHtcbiAgICB0aGlzLnJlYWR5ID0gZmFsc2U7XG5cbiAgICBpZiAodGhpcy51aUF1dG9DbGllbnQpIHtcbiAgICAgIGF3YWl0IHRoaXMudWlBdXRvQ2xpZW50LnNodXRkb3duKCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaW5zdHJ1bWVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMuaW5zdHJ1bWVudHMuc2h1dGRvd24oKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoYEluc3RydW1lbnRzIGRpZG4ndCBzaHV0IGRvd24uICR7ZXJyfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmNhcHMgJiYgdGhpcy5jYXBzLmN1c3RvbVNTTENlcnQgJiYgIXRoaXMuaXNSZWFsRGV2aWNlKCkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgVW5pbnN0YWxsaW5nIHNzbCBjZXJ0aWZpY2F0ZSBmb3IgdWRpZCAnJHt0aGlzLnNpbS51ZGlkfSdgKTtcbiAgICAgIGF3YWl0IHVuaW5zdGFsbFNTTENlcnQodGhpcy5jYXBzLmN1c3RvbVNTTENlcnQsIHRoaXMuc2ltLnVkaWQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdHMuZW5hYmxlQXN5bmNFeGVjdXRlRnJvbUh0dHBzICYmICF0aGlzLmlzUmVhbERldmljZSgpKSB7XG4gICAgICBhd2FpdCB0aGlzLnN0b3BIdHRwc0FzeW5jU2VydmVyKCk7XG4gICAgfVxuXG4gICAgdGhpcy51aUF1dG9DbGllbnQgPSBudWxsO1xuICAgIHRoaXMuaW5zdHJ1bWVudHMgPSBudWxsO1xuICAgIHRoaXMucmVhbERldmljZSA9IG51bGw7XG5cbiAgICAvLyBwb3N0Y2xlYW51cFxuICAgIHRoaXMuY3VyQ29vcmRzID0gbnVsbDtcbiAgICB0aGlzLm9wdHMuY3VyT3JpZW50YXRpb24gPSBudWxsO1xuICAgIGlmICghXy5pc0VtcHR5KHRoaXMubG9ncykpIHtcbiAgICAgIGF3YWl0IHRoaXMubG9ncy5zeXNsb2cuc3RvcENhcHR1cmUoKTtcbiAgICAgIHRoaXMubG9ncyA9IHt9O1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJlbW90ZSkge1xuICAgICAgYXdhaXQgdGhpcy5zdG9wUmVtb3RlKCk7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5zdG9wSVdEUCgpO1xuICB9XG5cbiAgYXN5bmMgZGVsZXRlU2Vzc2lvbiAoKSB7XG4gICAgbG9nZ2VyLmRlYnVnKCdEZWxldGluZyBpb3Mgc2Vzc2lvbicpO1xuXG4gICAgYXdhaXQgdGhpcy5zdG9wKCk7XG5cbiAgICBpZiAodGhpcy5vcHRzLmNsZWFyU3lzdGVtRmlsZXMpIHtcbiAgICAgIGF3YWl0IHV0aWxzLmNsZWFyTG9ncyhMT0dfTE9DQVRJT05TKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdOb3QgY2xlYXJpbmcgbG9nIGZpbGVzLiBVc2UgYGNsZWFyU3lzdGVtRmlsZXNgIGNhcGFiaWxpdHkgdG8gdHVybiBvbi4nKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc1JlYWxEZXZpY2UoKSkge1xuICAgICAgYXdhaXQgcnVuUmVhbERldmljZVJlc2V0KHRoaXMucmVhbERldmljZSwgdGhpcy5vcHRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgcnVuU2ltdWxhdG9yUmVzZXQodGhpcy5zaW0sIHRoaXMub3B0cywgdGhpcy5rZWVwQXBwVG9SZXRhaW5QcmVmcyk7XG4gICAgfVxuICAgIGF3YWl0IHN1cGVyLmRlbGV0ZVNlc3Npb24oKTtcbiAgfVxuXG4gIGFzeW5jIGdldFNlc3Npb24gKCkge1xuICAgIGxldCBjYXBzID0gYXdhaXQgc3VwZXIuZ2V0U2Vzc2lvbigpO1xuXG4gICAgY29uc3Qgdmlld3BvcnRSZWN0ID0gYXdhaXQgdGhpcy5nZXRWaWV3cG9ydFJlY3QoKTtcbiAgICBjb25zdCBwaXhlbFJhdGlvID0gYXdhaXQgdGhpcy5nZXREZXZpY2VQaXhlbFJhdGlvKCk7XG4gICAgY29uc3Qgc3RhdEJhckhlaWdodCA9IGF3YWl0IHRoaXMuZ2V0U3RhdHVzQmFySGVpZ2h0KCk7XG5cbiAgICBjYXBzLnZpZXdwb3J0UmVjdCA9IHZpZXdwb3J0UmVjdDtcbiAgICBjYXBzLnBpeGVsUmF0aW8gPSBwaXhlbFJhdGlvO1xuICAgIGNhcHMuc3RhdEJhckhlaWdodCA9IHN0YXRCYXJIZWlnaHQ7XG5cbiAgICByZXR1cm4gY2FwcztcbiAgfVxuXG4gIGFzeW5jIGV4ZWN1dGVDb21tYW5kIChjbWQsIC4uLmFyZ3MpIHtcbiAgICBsb2dnZXIuZGVidWcoYEV4ZWN1dGluZyBpT1MgY29tbWFuZCAnJHtjbWR9J2ApO1xuICAgIGlmIChjbWQgPT09ICdyZWNlaXZlQXN5bmNSZXNwb25zZScpIHtcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnJlY2VpdmVBc3luY1Jlc3BvbnNlKC4uLmFyZ3MpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5yZWFkeSB8fCBfLmluY2x1ZGVzKFsnbGF1bmNoQXBwJ10sIGNtZCkpIHtcbiAgICAgIHJldHVybiBhd2FpdCBzdXBlci5leGVjdXRlQ29tbWFuZChjbWQsIC4uLmFyZ3MpO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBlcnJvcnMuTm9TdWNoRHJpdmVyRXJyb3IoYERyaXZlciBpcyBub3QgcmVhZHksIGNhbm5vdCBleGVjdXRlICR7Y21kfS5gKTtcbiAgfVxuXG4gIC8vIFRPRE86IHJlZm9ybWF0IHRoaXMuaGVscGVycyArIGNvbmZpZ3VyZUFwcFxuICBhc3luYyBjb25maWd1cmVBcHAgKCkge1xuICAgIHRyeSB7XG4gICAgICAvLyBpZiB0aGUgYXBwIG5hbWUgaXMgYSBidW5kbGVJZCBhc3NpZ24gaXQgdG8gdGhlIGJ1bmRsZUlkIHByb3BlcnR5XG4gICAgICBpZiAoIXRoaXMub3B0cy5idW5kbGVJZCAmJiB1dGlscy5hcHBJc1BhY2thZ2VPckJ1bmRsZSh0aGlzLm9wdHMuYXBwKSkge1xuICAgICAgICB0aGlzLm9wdHMuYnVuZGxlSWQgPSB0aGlzLm9wdHMuYXBwO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRzLmFwcCAmJiB0aGlzLm9wdHMuYXBwLnRvTG93ZXJDYXNlKCkgPT09ICdzZXR0aW5ncycpIHtcbiAgICAgICAgaWYgKHBhcnNlRmxvYXQodGhpcy5vcHRzLnBsYXRmb3JtVmVyc2lvbikgPj0gOCkge1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnV2UgYXJlIG9uIGlPUzgrIHNvIG5vdCBjb3B5aW5nIHByZWZlcmVuY2VzIGFwcCcpO1xuICAgICAgICAgIHRoaXMub3B0cy5idW5kbGVJZCA9ICdjb20uYXBwbGUuUHJlZmVyZW5jZXMnO1xuICAgICAgICAgIHRoaXMub3B0cy5hcHAgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub3B0cy5hcHAgJiYgdGhpcy5vcHRzLmFwcC50b0xvd2VyQ2FzZSgpID09PSAnY2FsZW5kYXInKSB7XG4gICAgICAgIGlmIChwYXJzZUZsb2F0KHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24pID49IDgpIHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoJ1dlIGFyZSBvbiBpT1M4KyBzbyBub3QgY29weWluZyBjYWxlbmRhciBhcHAnKTtcbiAgICAgICAgICB0aGlzLm9wdHMuYnVuZGxlSWQgPSAnY29tLmFwcGxlLm1vYmlsZWNhbCc7XG4gICAgICAgICAgdGhpcy5vcHRzLmFwcCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5pc1NhZmFyaSgpKSB7XG4gICAgICAgIGlmICghdGhpcy5pc1JlYWxEZXZpY2UoKSkge1xuICAgICAgICAgIGlmIChwYXJzZUZsb2F0KHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24pID49IDgpIHtcbiAgICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnV2UgYXJlIG9uIGlPUzgrIHNvIG5vdCBjb3B5aW5nIFNhZmFyaSBhcHAnKTtcbiAgICAgICAgICAgIHRoaXMub3B0cy5idW5kbGVJZCA9IFNBRkFSSV9CVU5ETEU7XG4gICAgICAgICAgICB0aGlzLm9wdHMuYXBwID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gb24gcmVhbCBkZXZpY2UsIG5lZWQgdG8gY2hlY2sgaWYgc2FmYXJpIGxhdW5jaGVyIGV4aXN0c1xuICAgICAgICAgIC8vIGZpcnN0IGNoZWNrIGlmIGl0IGlzIGFscmVhZHkgb24gdGhlIGRldmljZVxuICAgICAgICAgIGlmICghYXdhaXQgdGhpcy5yZWFsRGV2aWNlLmlzSW5zdGFsbGVkKHRoaXMub3B0cy5idW5kbGVJZCkpIHtcbiAgICAgICAgICAgIC8vIGl0J3Mgbm90IG9uIHRoZSBkZXZpY2UsIHNvIGNoZWNrIGlmIHdlIG5lZWQgdG8gYnVpbGRcbiAgICAgICAgICAgIGlmIChhd2FpdCBuZWVkc0luc3RhbGwoKSkge1xuICAgICAgICAgICAgICBsb2dnZXIuZGVidWcoJ1NhZmFyaUxhdW5jaGVyIG5vdCBmb3VuZCwgYnVpbGRpbmcuLi4nKTtcbiAgICAgICAgICAgICAgYXdhaXQgaW5zdGFsbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5vcHRzLmJ1bmRsZUlkID0gU0FGQVJJX0xBVU5DSEVSX0JVTkRMRTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRzLmJ1bmRsZUlkICYmXG4gICAgICAgICAgICAgICAgIHV0aWxzLmFwcElzUGFja2FnZU9yQnVuZGxlKHRoaXMub3B0cy5idW5kbGVJZCkgJiZcbiAgICAgICAgICAgICAgICAgKHRoaXMub3B0cy5hcHAgPT09ICcnIHx8IHV0aWxzLmFwcElzUGFja2FnZU9yQnVuZGxlKHRoaXMub3B0cy5hcHApKSkge1xuICAgICAgICAvLyB3ZSBoYXZlIGEgYnVuZGxlIElELCBidXQgbm8gYXBwLCBvciBhcHAgaXMgYWxzbyBhIGJ1bmRsZVxuICAgICAgICBsb2dnZXIuZGVidWcoJ0FwcCBpcyBhbiBpT1MgYnVuZGxlLCB3aWxsIGF0dGVtcHQgdG8gcnVuIGFzIHByZS1leGlzdGluZycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vcHRzLmFwcCA9IGF3YWl0IHRoaXMuaGVscGVycy5jb25maWd1cmVBcHAodGhpcy5vcHRzLmFwcCwgJy5hcHAnKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGxvZ2dlci5lcnJvcihlcnIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBgQmFkIGFwcDogJHt0aGlzLm9wdHMuYXBwfS4gQXBwIHBhdGhzIG5lZWQgdG8gYmUgYWJzb2x1dGUsIG9yIHJlbGF0aXZlIHRvIHRoZSBhcHBpdW0gYCArXG4gICAgICAgICdzZXJ2ZXIgaW5zdGFsbCBkaXIsIG9yIGEgVVJMIHRvIGNvbXByZXNzZWQgZmlsZSwgb3IgYSBzcGVjaWFsIGFwcCBuYW1lLicpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHN0YXJ0U2ltdWxhdG9yICgpIHtcbiAgICBhd2FpdCB1dGlscy5yZW1vdmVJbnN0cnVtZW50c1NvY2tldCh0aGlzLnNvY2spO1xuXG4gICAgaWYgKCF0aGlzLnhjb2RlVmVyc2lvbikge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdTZXR0aW5nIFhjb2RlIHZlcnNpb24nKTtcbiAgICAgIHRoaXMueGNvZGVWZXJzaW9uID0gYXdhaXQgdXRpbHMuZ2V0QW5kQ2hlY2tYY29kZVZlcnNpb24odGhpcy5vcHRzKTtcbiAgICAgIGxvZ2dlci5kZWJ1ZyhgWGNvZGUgdmVyc2lvbiBzZXQgdG8gJHt0aGlzLnhjb2RlVmVyc2lvbi52ZXJzaW9uU3RyaW5nfWApO1xuICAgIH1cblxuICAgIGxvZ2dlci5kZWJ1ZygnU2V0dGluZyBpT1MgU0RLIFZlcnNpb24nKTtcbiAgICB0aGlzLmlvc1Nka1ZlcnNpb24gPSBhd2FpdCB1dGlscy5nZXRBbmRDaGVja0lvc1Nka1ZlcnNpb24oKTtcbiAgICBsb2dnZXIuZGVidWcoYGlPUyBTREsgVmVyc2lvbiBzZXQgdG8gJHt0aGlzLmlvc1Nka1ZlcnNpb259YCk7XG5cbiAgICBsZXQgdGltZW91dCA9IF8uaXNPYmplY3QodGhpcy5vcHRzLmxhdW5jaFRpbWVvdXQpID8gdGhpcy5vcHRzLmxhdW5jaFRpbWVvdXQuZ2xvYmFsIDogdGhpcy5vcHRzLmxhdW5jaFRpbWVvdXQ7XG4gICAgbGV0IGF2YWlsYWJsZURldmljZXMgPSBhd2FpdCByZXRyeSgzLCBpbnN0cnVtZW50c1V0aWxzLmdldEF2YWlsYWJsZURldmljZXMsIHRpbWVvdXQpO1xuXG4gICAgbGV0IGlvc1NpbVVkaWQgPSBhd2FpdCBjaGVja1NpbXVsYXRvckF2YWlsYWJsZSh0aGlzLm9wdHMsIHRoaXMuaW9zU2RrVmVyc2lvbiwgYXZhaWxhYmxlRGV2aWNlcyk7XG5cbiAgICB0aGlzLnNpbSA9IGF3YWl0IGdldFNpbXVsYXRvcihpb3NTaW1VZGlkLCB0aGlzLnhjb2RlVmVyc2lvbi52ZXJzaW9uU3RyaW5nKTtcblxuICAgIGF3YWl0IG1vdmVCdWlsdEluQXBwKHRoaXMuc2ltKTtcblxuICAgIHRoaXMub3B0cy5sb2NhbGl6YWJsZVN0cmluZ3MgPSBhd2FpdCB1dGlscy5wYXJzZUxvY2FsaXphYmxlU3RyaW5ncyh0aGlzLm9wdHMpO1xuXG4gICAgYXdhaXQgdXRpbHMuc2V0QnVuZGxlSWRGcm9tQXBwKHRoaXMub3B0cyk7XG5cbiAgICBhd2FpdCB0aGlzLmNyZWF0ZUluc3RydW1lbnRzKCk7XG5cbiAgICB7XG4gICAgICAvLyBwcmV2aW91c2x5IHNldERldmljZUluZm8oKVxuICAgICAgdGhpcy5zaG91bGRQcmVsYXVuY2hTaW11bGF0b3IgPSB1dGlscy5zaG91bGRQcmVsYXVuY2hTaW11bGF0b3IodGhpcy5vcHRzLCB0aGlzLmlvc1Nka1ZlcnNpb24pO1xuICAgICAgbGV0IGRTdHJpbmcgPSBhd2FpdCBnZXRBZGp1c3RlZERldmljZU5hbWUodGhpcy5vcHRzKTtcbiAgICAgIGlmICh0aGlzLmNhcHMuYXBwKSB7XG4gICAgICAgIGF3YWl0IHV0aWxzLnNldERldmljZVR5cGVJbkluZm9QbGlzdCh0aGlzLm9wdHMuYXBwLCBkU3RyaW5nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhd2FpdCBydW5TaW11bGF0b3JSZXNldCh0aGlzLnNpbSwgdGhpcy5vcHRzLCB0aGlzLmtlZXBBcHBUb1JldGFpblByZWZzKTtcblxuICAgIGlmICh0aGlzLmNhcHMuY3VzdG9tU1NMQ2VydCAmJiAhdGhpcy5pc1JlYWxEZXZpY2UoKSkge1xuICAgICAgYXdhaXQgaW5zdGFsbFNTTENlcnQodGhpcy5jYXBzLmN1c3RvbVNTTENlcnQsIHRoaXMuc2ltLnVkaWQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm9wdHMuZW5hYmxlQXN5bmNFeGVjdXRlRnJvbUh0dHBzICYmICF0aGlzLmlzUmVhbERldmljZSgpKSB7XG4gICAgICAvLyBhd2FpdCB0aGlzLnNpbS5zaHV0ZG93bigpO1xuICAgICAgYXdhaXQgdGhpcy5zdGFydEh0dHBzQXN5bmNTZXJ2ZXIoKTtcbiAgICB9XG5cbiAgICBhd2FpdCBpc29sYXRlU2ltdWxhdG9yRGV2aWNlKHRoaXMuc2ltLCB0aGlzLm9wdHMpO1xuICAgIHRoaXMubG9jYWxDb25maWcgPSBhd2FpdCBzZXRMb2NhbGVBbmRQcmVmZXJlbmNlcyh0aGlzLnNpbSwgdGhpcy5vcHRzLCB0aGlzLmlzU2FmYXJpKCksIGVuZFNpbXVsYXRvcik7XG4gICAgYXdhaXQgdGhpcy5zZXRVcExvZ0NhcHR1cmUoKTtcbiAgICBhd2FpdCB0aGlzLnByZWxhdW5jaFNpbXVsYXRvcigpO1xuICAgIGF3YWl0IHRoaXMuc3RhcnRJbnN0cnVtZW50cygpO1xuICAgIGF3YWl0IHRoaXMub25JbnN0cnVtZW50c0xhdW5jaCgpO1xuICAgIGF3YWl0IHRoaXMuY29uZmlndXJlQm9vdHN0cmFwKCk7XG4gICAgYXdhaXQgdGhpcy5zZXRCdW5kbGVJZCgpO1xuICAgIGF3YWl0IHRoaXMuc2V0SW5pdGlhbE9yaWVudGF0aW9uKCk7XG4gICAgYXdhaXQgdGhpcy5pbml0QXV0b1dlYnZpZXcoKTtcbiAgICBhd2FpdCB0aGlzLndhaXRGb3JBcHBMYXVuY2hlZCgpO1xuICB9XG5cbiAgYXN5bmMgc3RhcnRSZWFsRGV2aWNlICgpIHtcbiAgICBhd2FpdCB1dGlscy5yZW1vdmVJbnN0cnVtZW50c1NvY2tldCh0aGlzLnNvY2spO1xuICAgIHRoaXMub3B0cy5sb2NhbGl6YWJsZVN0cmluZ3MgPSBhd2FpdCB1dGlscy5wYXJzZUxvY2FsaXphYmxlU3RyaW5ncyh0aGlzLm9wdHMpO1xuICAgIGF3YWl0IHV0aWxzLnNldEJ1bmRsZUlkRnJvbUFwcCh0aGlzLm9wdHMpO1xuICAgIGF3YWl0IHRoaXMuY3JlYXRlSW5zdHJ1bWVudHMoKTtcbiAgICBhd2FpdCBydW5SZWFsRGV2aWNlUmVzZXQodGhpcy5yZWFsRGV2aWNlLCB0aGlzLm9wdHMpO1xuICAgIGF3YWl0IHRoaXMuc2V0VXBMb2dDYXB0dXJlKCk7XG4gICAgYXdhaXQgdGhpcy5pbnN0YWxsVG9SZWFsRGV2aWNlKCk7XG4gICAgYXdhaXQgdGhpcy5zdGFydEluc3RydW1lbnRzKCk7XG4gICAgYXdhaXQgdGhpcy5vbkluc3RydW1lbnRzTGF1bmNoKCk7XG4gICAgYXdhaXQgdGhpcy5jb25maWd1cmVCb290c3RyYXAoKTtcbiAgICBhd2FpdCB0aGlzLnNldEJ1bmRsZUlkKCk7XG4gICAgYXdhaXQgdGhpcy5zZXRJbml0aWFsT3JpZW50YXRpb24oKTtcbiAgICBhd2FpdCB0aGlzLmluaXRBdXRvV2VidmlldygpO1xuICAgIGF3YWl0IHRoaXMud2FpdEZvckFwcExhdW5jaGVkKCk7XG4gIH1cblxuICBhc3luYyBpbnN0YWxsVG9SZWFsRGV2aWNlICgpIHtcbiAgICAvLyBpZiB1c2VyIGhhcyBwYXNzZWQgaW4gZGVzaXJlZENhcHMuYXV0b0xhdW5jaCA9IGZhbHNlXG4gICAgLy8gbWVhbmluZyB0aGV5IHdpbGwgbWFuYWdlIGFwcCBpbnN0YWxsIC8gbGF1bmNoaW5nXG4gICAgaWYgKHRoaXMub3B0cy5hdXRvTGF1bmNoID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGlmIHdlIGhhdmUgYW4gaXBhIGZpbGUsIHNldCBpdCBpbiBvcHRzXG4gICAgaWYgKHRoaXMub3B0cy5hcHApIHtcbiAgICAgIGxldCBleHQgPSB0aGlzLm9wdHMuYXBwLnN1YnN0cmluZyh0aGlzLm9wdHMuYXBwLmxlbmd0aCAtIDMpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoZXh0ID09PSAnaXBhJykge1xuICAgICAgICB0aGlzLm9wdHMuaXBhID0gdGhpcy5vcHRzLmFwcDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5vcHRzLnVkaWQpIHtcbiAgICAgIGlmIChhd2FpdCB0aGlzLnJlYWxEZXZpY2UuaXNJbnN0YWxsZWQodGhpcy5vcHRzLmJ1bmRsZUlkKSkge1xuICAgICAgICBsb2dnZXIuZGVidWcoJ0FwcCBpcyBpbnN0YWxsZWQuJyk7XG4gICAgICAgIGlmICh0aGlzLm9wdHMuZnVsbFJlc2V0KSB7XG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKCdmdWxsUmVzZXQgcmVxdWVzdGVkLiBGb3JjaW5nIGFwcCBpbnN0YWxsLicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxvZ2dlci5kZWJ1ZygnZnVsbFJlc2V0IG5vdCByZXF1ZXN0ZWQuIE5vIG5lZWQgdG8gaW5zdGFsbC4nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvZ2dlci5kZWJ1ZygnQXBwIGlzIG5vdCBpbnN0YWxsZWQuIFdpbGwgdHJ5IHRvIGluc3RhbGwuJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLm9wdHMuaXBhICYmIHRoaXMub3B0cy5idW5kbGVJZCkge1xuICAgICAgICBhd2FpdCB0aGlzLmluc3RhbGxJcGEoKTtcbiAgICAgICAgbG9nZ2VyLmRlYnVnKCdBcHAgaW5zdGFsbGVkLicpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdHMuaXBhKSB7XG4gICAgICAgIGxldCBtc2cgPSAnWW91IHNwZWNpZmllZCBhIFVESUQgYW5kIGlwYSBidXQgZGlkIG5vdCBpbmNsdWRlIHRoZSBidW5kbGUgaWQnO1xuICAgICAgICBsb2dnZXIud2Fybihtc2cpO1xuICAgICAgICB0aHJvdyBuZXcgZXJyb3JzLlVua25vd25FcnJvcihtc2cpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdHMuYXBwKSB7XG4gICAgICAgIGF3YWl0IHRoaXMucmVhbERldmljZS5pbnN0YWxsKHRoaXMub3B0cy5hcHApO1xuICAgICAgICBsb2dnZXIuZGVidWcoJ0FwcCBpbnN0YWxsZWQuJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2dnZXIuZGVidWcoJ1JlYWwgZGV2aWNlIHNwZWNpZmllZCBidXQgbm8gaXBhIG9yIGFwcCBwYXRoLCBhc3N1bWluZyBidW5kbGUgSUQgaXMgJyArXG4gICAgICAgICAgICAgICAgICAgICAnb24gZGV2aWNlJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnTm8gZGV2aWNlIGlkIG9yIGFwcCwgbm90IGluc3RhbGxpbmcgdG8gcmVhbCBkZXZpY2UuJyk7XG4gICAgfVxuICB9XG5cbiAgZ2V0SURldmljZU9iaiAoKSB7XG4gICAgbGV0IGlkaVBhdGggPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4vLi4vLi4vYnVpbGQvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbGliaW1vYmlsZWRldmljZS1tYWNvc3gvaWRldmljZWluc3RhbGxlcicpO1xuICAgIGxvZ2dlci5kZWJ1ZyhgQ3JlYXRpbmcgaURldmljZSBvYmplY3Qgd2l0aCB1ZGlkICR7dGhpcy5vcHRzLnVkaWR9YCk7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBpRGV2aWNlKHRoaXMub3B0cy51ZGlkKTtcbiAgICB9IGNhdGNoIChlMSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKGBDb3VsZG4ndCBmaW5kIGlkZXZpY2VpbnN0YWxsZXIsIHRyeWluZyBidWlsdC1pbiBhdCAke2lkaVBhdGh9YCk7XG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gaURldmljZSh0aGlzLm9wdHMudWRpZCwge2NtZDogaWRpUGF0aH0pO1xuICAgICAgfSBjYXRjaCAoZTIpIHtcbiAgICAgICAgbGV0IG1zZyA9ICdDb3VsZCBub3QgaW5pdGlhbGl6ZSBpZGV2aWNlaW5zdGFsbGVyOyBtYWtlIHN1cmUgaXQgaXMgJyArXG4gICAgICAgICAgICAgICAgICAnaW5zdGFsbGVkIGFuZCB3b3JrcyBvbiB5b3VyIHN5c3RlbSc7XG4gICAgICAgIGxvZ2dlci5lcnJvcihtc2cpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBpbnN0YWxsSXBhICgpIHtcbiAgICBsb2dnZXIuZGVidWcoYEluc3RhbGxpbmcgaXBhIGZvdW5kIGF0ICR7dGhpcy5vcHRzLmlwYX1gKTtcbiAgICBpZiAoYXdhaXQgdGhpcy5yZWFsRGV2aWNlLmlzSW5zdGFsbGVkKHRoaXMub3B0cy5idW5kbGVJZCkpIHtcbiAgICAgIGxvZ2dlci5kZWJ1ZygnQnVuZGxlIGZvdW5kIG9uIGRldmljZSwgcmVtb3ZpbmcgYmVmb3JlIHJlaW5zdGFsbGluZy4nKTtcbiAgICAgIGF3YWl0IHRoaXMucmVhbERldmljZS5yZW1vdmUodGhpcy5vcHRzLmJ1bmRsZUlkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nZ2VyLmRlYnVnKCdOb3RoaW5nIGZvdW5kIG9uIGRldmljZSwgZ29pbmcgYWhlYWQgYW5kIGluc3RhbGxpbmcuJyk7XG4gICAgfVxuICAgIGF3YWl0IHRoaXMucmVhbERldmljZS5pbnN0YWxsQW5kV2FpdCh0aGlzLm9wdHMuaXBhLCB0aGlzLm9wdHMuYnVuZGxlSWQpO1xuICB9XG5cbiAgdmFsaWRhdGVEZXNpcmVkQ2FwcyAoY2Fwcykge1xuICAgIC8vIGNoZWNrIHdpdGggdGhlIGJhc2UgY2xhc3MsIGFuZCByZXR1cm4gaWYgaXQgZmFpbHNcbiAgICBsZXQgcmVzID0gc3VwZXIudmFsaWRhdGVEZXNpcmVkQ2FwcyhjYXBzKTtcbiAgICBpZiAoIXJlcykgcmV0dXJuIHJlczsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjdXJseVxuXG4gICAgcmV0dXJuIGRlc2lyZWRDYXBWYWxpZGF0aW9uKGNhcHMpO1xuICB9XG5cbiAgYXN5bmMgcHJlbGF1bmNoU2ltdWxhdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuc2hvdWxkUHJlbGF1bmNoU2ltdWxhdG9yKSB7XG4gICAgICBsb2dnZXIuZGVidWcoJ05vdCBwcmUtbGF1bmNoaW5nIHNpbXVsYXRvcicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhd2FpdCBlbmRTaW11bGF0b3IodGhpcy5zaW0pO1xuICAgIC8vIFRPRE86IGltcGxlbWVudCBwcmVsYXVuY2ggc2ltIGluIHNpbXVsYXRvciBwYWNrYWdlXG4gIH1cblxuICBhc3luYyBvbkluc3RydW1lbnRzTGF1bmNoICgpIHtcbiAgICBsb2dnZXIuZGVidWcoJ0luc3RydW1lbnRzIGxhdW5jaGVkLiBTdGFydGluZyBwb2xsIGxvb3AgZm9yIG5ldyBjb21tYW5kcy4nKTtcbiAgICBpZiAodGhpcy5vcHRzLm9yaWdBcHBQYXRoKSB7XG4gICAgICBsb2dnZXIuZGVidWcoJ0NvcHlpbmcgYXBwIGJhY2sgdG8gaXRzIG9yaWdpbmFsIHBsYWNlJyk7XG4gICAgICByZXR1cm4gYXdhaXQgZnMuY29weUZpbGUodGhpcy5vcHRzLmFwcCwgdGhpcy5vcHRzLm9yaWdBcHBQYXRoKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzZXRCdW5kbGVJZCAoKSB7XG4gICAgaWYgKHRoaXMub3B0cy5idW5kbGVJZCkge1xuICAgICAgLy8gV2UgYWxyZWFkeSBoYXZlIGEgYnVuZGxlIElkXG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBiSWQgPSBhd2FpdCB0aGlzLnVpQXV0b0NsaWVudC5zZW5kQ29tbWFuZCgnYXUuYnVuZGxlSWQoKScpO1xuICAgICAgbG9nZ2VyLmRlYnVnKGBCdW5kbGUgSUQgZm9yIG9wZW4gYXBwIGlzICR7YklkLnZhbHVlfWApO1xuICAgICAgdGhpcy5vcHRzLmJ1bmRsZUlkID0gYklkLnZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHN0YXJ0SVdEUCAoKSB7XG4gICAgaWYgKHRoaXMub3B0cy5zdGFydElXRFApIHtcbiAgICAgIHRoaXMuaXdkcFNlcnZlciA9IG5ldyBJV0RQKHtcbiAgICAgICAgd2Via2l0RGVidWdQcm94eVBvcnQ6IHRoaXMub3B0cy53ZWJraXREZWJ1Z1Byb3h5UG9ydCxcbiAgICAgICAgdWRpZDogdGhpcy5vcHRzLnVkaWQsXG4gICAgICAgIGxvZ1N0ZG91dDogISF0aGlzLm9wdHMuc2hvd0lXRFBMb2csXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IHRoaXMuaXdkcFNlcnZlci5zdGFydCgpO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHN0b3BJV0RQICgpIHtcbiAgICBpZiAodGhpcy5pd2RwU2VydmVyKSB7XG4gICAgICBhd2FpdCB0aGlzLml3ZHBTZXJ2ZXIuc3RvcCgpO1xuICAgICAgZGVsZXRlIHRoaXMuaXdkcFNlcnZlcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzZXRJbml0aWFsT3JpZW50YXRpb24gKCkge1xuICAgIGlmIChfLmlzU3RyaW5nKHRoaXMub3B0cy5pbml0aWFsT3JpZW50YXRpb24pICYmXG4gICAgICAgIF8uaW5jbHVkZXMoWydMQU5EU0NBUEUnLCAnUE9SVFJBSVQnXSwgdGhpcy5vcHRzLmluaXRpYWxPcmllbnRhdGlvbi50b1VwcGVyQ2FzZSgpKSkge1xuICAgICAgbG9nZ2VyLmRlYnVnKGBTZXR0aW5nIGluaXRpYWwgb3JpZW50YXRpb24gdG8gJHt0aGlzLm9wdHMuaW5pdGlhbE9yaWVudGF0aW9ufWApO1xuICAgICAgbGV0IGNvbW1hbmQgPSBgYXUuc2V0U2NyZWVuT3JpZW50YXRpb24oJyR7dGhpcy5vcHRzLmluaXRpYWxPcmllbnRhdGlvbi50b1VwcGVyQ2FzZSgpfScpYDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IHRoaXMudWlBdXRvQ2xpZW50LnNlbmRDb21tYW5kKGNvbW1hbmQpO1xuICAgICAgICB0aGlzLm9wdHMuY3VyT3JpZW50YXRpb24gPSB0aGlzLm9wdHMuaW5pdGlhbE9yaWVudGF0aW9uO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGxvZ2dlci53YXJuKGBTZXR0aW5nIGluaXRpYWwgb3JpZW50YXRpb24gZmFpbGVkIHdpdGg6ICR7ZXJyfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlzUmVhbERldmljZSAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5vcHRzLnVkaWQ7XG4gIH1cblxuICBpc1NhZmFyaSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0cy5zYWZhcmk7XG4gIH1cblxuICBhc3luYyB3YWl0Rm9yQXBwTGF1bmNoZWQgKCkge1xuICAgIC8vIG9uIGlPUzggaW4gcGFydGljdWxhciwgd2UgY2FuIGdldCBhIHdvcmtpbmcgc2Vzc2lvbiBiZWZvcmUgdGhlIGFwcFxuICAgIC8vIGlzIHJlYWR5IHRvIHJlc3BvbmQgdG8gY29tbWFuZHM7IGluIHRoYXQgY2FzZSB0aGUgc291cmNlIHdpbGwgYmUgZW1wdHlcbiAgICAvLyBzbyB3ZSBqdXN0IHNwaW4gdW50aWwgaXQncyBub3RcbiAgICBsZXQgY29uZEZuO1xuICAgIGlmICh0aGlzLm9wdHMud2FpdEZvckFwcFNjcmlwdCkge1xuICAgICAgLy8gdGhlIGRlZmF1bHQgZ2V0U291cmNlRm9yRWxlbWVudEZvclhNTCBkb2VzIG5vdCBmaXQgc29tZSB1c2UgY2FzZSwgc28gbWFraW5nIHRoaXMgY3VzdG9taXphYmxlLlxuICAgICAgLy8gVE9ETzogY29sbGVjdCBzY3JpcHQgZnJvbSBjdXN0b21lciBhbmQgcHJvcG9zZSBzZXZlcmFsIG9wdGlvbnMsIHBsZWFzZSBjb21tZW50IGluIGlzc3VlICM0MTkwLlxuICAgICAgbG9nZ2VyLmRlYnVnKGBVc2luZyBjdXN0b20gc2NyaXB0IHRvIHdhaXQgZm9yIGFwcCBzdGFydDogJHt0aGlzLm9wdHMud2FpdEZvckFwcFNjcmlwdH1gKTtcbiAgICAgIGNvbmRGbiA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgbGV0IHJlcztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXMgPSBhd2FpdCB0aGlzLnVpQXV0b0NsaWVudC5zZW5kQ29tbWFuZChgdHJ5e1xcbiR7dGhpcy5vcHRzLndhaXRGb3JBcHBTY3JpcHR9YCArXG4gICAgICAgICAgICAgICAgICAgICBgXFxufSBjYXRjaChlcnIpIHsgJC5sb2coXCJ3YWl0Rm9yQXBwU2NyaXB0IGVycjogXCIgKyBlcnJvcik7IGZhbHNlOyB9O2ApO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBsb2dnZXIuZGVidWcoYENhbm5vdCBldmFsIHdhaXRGb3JBcHBTY3JpcHQgc2NyaXB0LCBlcnI6ICR7ZXJyfWApO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHJlcyAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgbG9nZ2VyLmRlYnVnKCdVbmV4cGVjdGVkIHJldHVybiB0eXBlIGluIHdhaXRGb3JBcHBTY3JpcHQgc2NyaXB0Jyk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAodGhpcy5pc1NhZmFyaSgpKSB7XG4gICAgICBpZiAodGhpcy5pc1JlYWxEZXZpY2UoKSkge1xuICAgICAgICBhd2FpdCB0aGlzLmNsaWNrQnV0dG9uVG9MYXVuY2hTYWZhcmkoKTtcbiAgICAgIH1cbiAgICAgIGxvZ2dlci5kZWJ1ZygnV2FpdGluZyBmb3IgaW5pdGlhbCB3ZWJ2aWV3Jyk7XG4gICAgICBhd2FpdCB0aGlzLm5hdlRvSW5pdGlhbFdlYnZpZXcoKTtcbiAgICAgIGNvbmRGbiA9IGFzeW5jICgpID0+IHRydWU7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgcmVxdWlyZS1hd2FpdFxuICAgIH0gZWxzZSB7XG4gICAgICBsb2dnZXIuZGVidWcoJ1dhaXRpbmcgZm9yIGFwcCBzb3VyY2UgdG8gY29udGFpbiBlbGVtZW50cycpO1xuICAgICAgY29uZEZuID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGxldCBzb3VyY2UgPSBhd2FpdCB0aGlzLmdldFNvdXJjZUZvckVsZW1lbnRGb3JYTUwoKTtcbiAgICAgICAgICBzb3VyY2UgPSBKU09OLnBhcnNlKHNvdXJjZSB8fCAne30nKTtcbiAgICAgICAgICBsZXQgYXBwRWxzID0gKHNvdXJjZS5VSUFBcHBsaWNhdGlvbiB8fCB7fSlbJz4nXTtcbiAgICAgICAgICByZXR1cm4gYXBwRWxzICYmIGFwcEVscy5sZW5ndGggPiAwICYmICFJb3NEcml2ZXIuaXNTcHJpbmdCb2FyZChzb3VyY2UuVUlBQXBwbGljYXRpb24pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgbG9nZ2VyLndhcm4oYENvdWxkbid0IGV4dHJhY3QgYXBwIGVsZW1lbnQgZnJvbSBzb3VyY2UsIGVycm9yIHdhczogJHtlfWApO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IHdhaXRGb3JDb25kaXRpb24oY29uZEZuLCB7bG9nZ2VyLCB3YWl0TXM6IDEwMDAwLCBpbnRlcnZhbE1zOiA1MDB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChlcnIubWVzc2FnZSAmJiBlcnIubWVzc2FnZS5tYXRjaCgvQ29uZGl0aW9uIHVubWV0LykpIHtcbiAgICAgICAgbG9nZ2VyLndhcm4oJ0luaXRpYWwgc3BpbiB0aW1lZCBvdXQsIGNvbnRpbnVpbmcgYnV0IHRoZSBhcHAgbWlnaHQgbm90IGJlIHJlYWR5LicpO1xuICAgICAgICBsb2dnZXIuZGVidWcoYEluaXRpYWwgc3BpbiBlcnJvciB3YXM6ICR7ZXJyfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBpc1NwcmluZ0JvYXJkICh1aUFwcE9iaikge1xuICAvLyBUT0RPOiBtb3ZlIHRvIGhlbHBlcnNcbiAgLy8gVGVzdCBmb3IgaU9TIGhvbWVzY3JlZW4gKFNwcmluZ0JvYXJkKS4gQVVUIG9jY2Fzc2lvbmFsbHkgc3RhcnQgdGhlIHNpbSwgYnV0IGZhaWxzIHRvIGxvYWRcbiAgLy8gdGhlIGFwcC4gSWYgdGhhdCBvY2N1cnMsIGdldFNvdXJjZUZvckVsZW1lbnRGb1hNTCB3aWxsIHJldHVybiBhIGRvYyBvYmplY3QgdGhhdCBtZWV0cyBvdXJcbiAgLy8gYXBwLWNoZWNrIGNvbmRpdGlvbnMsIHJlc3VsdGluZyBpbiBhIGZhbHNlIHBvc2l0aXZlLiBUaGlzIGZ1bmN0aW9uIHRlc3RzIHRoZSBVaUFwcGxpY2F0aW9uXG4gIC8vIHByb3BlcnR5J3MgbWV0YSBkYXRhIHRvIGVuc3VyZSB0aGF0IHRoZSBBcHBpdW0gZG9lc24ndCBjb25mdXNlIFNwcmluZ0JvYXJkIHdpdGggdGhlIGFwcFxuICAvLyB1bmRlciB0ZXN0LlxuICAgIHJldHVybiBfLnByb3BlcnR5T2YodWlBcHBPYmpbJ0AnXSkoJ25hbWUnKSA9PT0gJ1NwcmluZ0JvYXJkJztcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUluc3RydW1lbnRzICgpIHtcbiAgICBsb2dnZXIuZGVidWcoJ0NyZWF0aW5nIGluc3RydW1lbnRzJyk7XG4gICAgdGhpcy51aUF1dG9DbGllbnQgPSBuZXcgVUlBdXRvQ2xpZW50KHRoaXMuc29jayk7XG4gICAgdGhpcy5pbnN0cnVtZW50cyA9IGF3YWl0IHRoaXMubWFrZUluc3RydW1lbnRzKCk7XG4gICAgdGhpcy5pbnN0cnVtZW50cy5vblNodXRkb3duLmNhdGNoKGFzeW5jICgpID0+IHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBwcm9taXNlL2NhdGNoLW9yLXJldHVyblxuICAgICAgLy8gdW5leHBlY3RlZCBleGl0XG4gICAgICBhd2FpdCB0aGlzLnN0YXJ0VW5leHBlY3RlZFNodXRkb3duKG5ldyBlcnJvcnMuVW5rbm93bkVycm9yKCdBYm5vcm1hbCBJbnN0cnVtZW50cyB0ZXJtaW5hdGlvbiEnKSk7XG4gICAgfSkuZG9uZSgpO1xuICB9XG5cbiAgc2hvdWxkSWdub3JlSW5zdHJ1bWVudHNFeGl0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5zYWZhcmkgJiYgdGhpcy5pc1JlYWxEZXZpY2UoKTtcbiAgfVxuXG4gIGFzeW5jIG1ha2VJbnN0cnVtZW50cyAoKSB7XG4gICAgLy8gYXQgdGhlIG1vbWVudCBhbGwgdGhlIGxvZ2dpbmcgaW4gdWlhdXRvIGlzIGF0IGRlYnVnIGxldmVsXG4gICAgbGV0IGJvb3RzdHJhcFBhdGggPSBhd2FpdCBwcmVwYXJlQm9vdHN0cmFwKHtcbiAgICAgIHNvY2s6IHRoaXMuc29jayxcbiAgICAgIGludGVyS2V5RGVsYXk6IHRoaXMub3B0cy5pbnRlcktleURlbGF5LFxuICAgICAganVzdExvb3BJbmZpbml0ZWx5OiBmYWxzZSxcbiAgICAgIGF1dG9BY2NlcHRBbGVydHM6IHRoaXMub3B0cy5hdXRvQWNjZXB0QWxlcnRzLFxuICAgICAgYXV0b0Rpc21pc3NBbGVydHM6IHRoaXMub3B0cy5hdXRvRGlzbWlzc0FsZXJ0cyxcbiAgICAgIHNlbmRLZXlTdHJhdGVneTogdGhpcy5vcHRzLnNlbmRLZXlTdHJhdGVneSB8fCAodGhpcy5pc1JlYWxEZXZpY2UoKSA/ICdncm91cGVkJyA6ICdvbmVCeU9uZScpXG4gICAgfSk7XG4gICAgbGV0IGluc3RydW1lbnRzID0gbmV3IEluc3RydW1lbnRzKHtcbiAgICAgIC8vIG9uIHJlYWwgZGV2aWNlcyBidW5kbGVJZCBpcyBhbHdheXMgdXNlZFxuICAgICAgYXBwOiAoIXRoaXMuaXNSZWFsRGV2aWNlKCkgPyB0aGlzLm9wdHMuYXBwIDogbnVsbCkgfHwgdGhpcy5vcHRzLmJ1bmRsZUlkLFxuICAgICAgdWRpZDogdGhpcy5vcHRzLnVkaWQsXG4gICAgICBwcm9jZXNzQXJndW1lbnRzOiB0aGlzLm9wdHMucHJvY2Vzc0FyZ3VtZW50cyxcbiAgICAgIGlnbm9yZVN0YXJ0dXBFeGl0OiB0aGlzLnNob3VsZElnbm9yZUluc3RydW1lbnRzRXhpdCgpLFxuICAgICAgYm9vdHN0cmFwOiBib290c3RyYXBQYXRoLFxuICAgICAgdGVtcGxhdGU6IHRoaXMub3B0cy5hdXRvbWF0aW9uVHJhY2VUZW1wbGF0ZVBhdGgsXG4gICAgICBpbnN0cnVtZW50c1BhdGg6IHRoaXMub3B0cy5pbnN0cnVtZW50c1BhdGgsXG4gICAgICB3aXRob3V0RGVsYXk6IHRoaXMub3B0cy53aXRob3V0RGVsYXksXG4gICAgICBwbGF0Zm9ybVZlcnNpb246IHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24sXG4gICAgICB3ZWJTb2NrZXQ6IHRoaXMub3B0cy53ZWJTb2NrZXQsXG4gICAgICBsYXVuY2hUaW1lb3V0OiB0aGlzLm9wdHMubGF1bmNoVGltZW91dCxcbiAgICAgIGZsYWtleVJldHJpZXM6IHRoaXMub3B0cy5iYWNrZW5kUmV0cmllcyxcbiAgICAgIHJlYWxEZXZpY2U6IHRoaXMuaXNSZWFsRGV2aWNlKCksXG4gICAgICBzaW11bGF0b3JTZGtBbmREZXZpY2U6IHRoaXMuaW9zU2RrVmVyc2lvbiA+PSA3LjEgPyBhd2FpdCBnZXRBZGp1c3RlZERldmljZU5hbWUodGhpcy5vcHRzKSA6IG51bGwsXG4gICAgICB0bXBEaXI6IHBhdGgucmVzb2x2ZSh0aGlzLm9wdHMudG1wRGlyIHx8ICcvdG1wJywgJ2FwcGl1bS1pbnN0cnVtZW50cycpLFxuICAgICAgdHJhY2VEaXI6IHRoaXMub3B0cy50cmFjZURpcixcbiAgICAgIGxvY2FsZTogdGhpcy5vcHRzLmxvY2FsZSxcbiAgICAgIGxhbmd1YWdlOiB0aGlzLm9wdHMubGFuZ3VhZ2VcbiAgICB9KTtcbiAgICByZXR1cm4gaW5zdHJ1bWVudHM7XG4gIH1cblxuICBhc3luYyBzdGFydEluc3RydW1lbnRzICgpIHtcbiAgICBsb2dnZXIuZGVidWcoJ1N0YXJ0aW5nIFVJQXV0b0NsaWVudCwgYW5kIGxhdW5jaGluZyBJbnN0cnVtZW50cy4nKTtcblxuICAgIGF3YWl0IEIuYWxsKFtcbiAgICAgIHRoaXMudWlBdXRvQ2xpZW50LnN0YXJ0KCkudGhlbigoKSA9PiB7IHRoaXMuaW5zdHJ1bWVudHMucmVnaXN0ZXJMYXVuY2goKTsgfSksXG4gICAgICB0aGlzLmluc3RydW1lbnRzLmxhdW5jaCgpXG4gICAgXSk7XG4gIH1cblxuICBhc3luYyBjb25maWd1cmVCb290c3RyYXAgKCkge1xuICAgIGxvZ2dlci5kZWJ1ZygnU2V0dGluZyBib290c3RyYXAgY29uZmlnIGtleXMvdmFsdWVzJyk7XG4gICAgbGV0IGlzVmVyYm9zZSA9IHRydWU7IC8vIFRPRE86IGxldmVsIHdhcyBjb25maWd1cmVkIGFjY29yZGluZyB0byBsb2dnZXJcbiAgICBsZXQgY21kID0gJ3RhcmdldCA9ICQudGFyZ2V0KCk7XFxuJztcbiAgICBjbWQgKz0gJ2F1ID0gJDtcXG4nO1xuICAgIGNtZCArPSBgJC5pc1ZlcmJvc2UgPSAke2lzVmVyYm9zZX07XFxuYDtcbiAgICAvLyBOb3QgdXNpbmcgdWlhdXRvIGdyYWNlIHBlcmlvZCBiZWNhdXNlIG9mIGJ1Zy5cbiAgICAvLyBjbWQgKz0gJyQudGFyZ2V0KCkuc2V0VGltZW91dCgxKTtcXG4nO1xuICAgIGF3YWl0IHRoaXMudWlBdXRvQ2xpZW50LnNlbmRDb21tYW5kKGNtZCk7XG4gIH1cblxuICBhc3luYyBnZXRTb3VyY2VGb3JFbGVtZW50Rm9yWE1MIChjdHgpIHtcbiAgICBsZXQgc291cmNlO1xuICAgIGlmICghY3R4KSB7XG4gICAgICBzb3VyY2UgPSBhd2FpdCB0aGlzLnVpQXV0b0NsaWVudC5zZW5kQ29tbWFuZCgnYXUubWFpbkFwcCgpLmdldFRyZWVGb3JYTUwoKScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzb3VyY2UgPSBhd2FpdCB0aGlzLnVpQXV0b0NsaWVudC5zZW5kQ29tbWFuZChgYXUuZ2V0RWxlbWVudCgnJHtjdHh9JykuZ2V0VHJlZUZvclhNTCgpYCk7XG4gICAgfVxuICAgIC8vIFRPRE86IGFsbCB0aGlzIGpzb24veG1sIGxvZ2ljIGlzIHZlcnkgZXhwZW5zaXZlLCB3ZSBuZWVkXG4gICAgLy8gdG8gdXNlIGEgU0FYIHBhcnNlciBpbnN0ZWFkLlxuICAgIGlmIChzb3VyY2UpIHtcbiAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShzb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0aGlzIHNob3VsZCBuZXZlciBoYXBwZW4gYnV0IHdlJ3ZlIHJlY2VpdmVkIGJ1ZyByZXBvcnRzOyB0aGlzIHdpbGwgaGVscCB1cyB0cmFjayBkb3duXG4gICAgICAvLyB3aGF0J3Mgd3JvbmcgaW4gZ2V0VHJlZUZvclhNTFxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBCYWQgcmVzcG9uc2UgZnJvbSBnZXRUcmVlRm9yWE1MLiByZXMgd2FzICR7SlNPTi5zdHJpbmdpZnkoc291cmNlKX1gKTtcbiAgICB9XG4gIH1cblxuICBhc3luYyBzZXRVcExvZ0NhcHR1cmUgKCkge1xuICAgIGlmICh0aGlzLmNhcHMuc2tpcExvZ0NhcHR1cmUpIHtcbiAgICAgIGxvZ2dlci5pbmZvKFwiJ3NraXBMb2dDYXB0dXJlJyBpcyBzZXQuIFNraXBwaW5nIHRoZSBjb2xsZWN0aW9uIG9mIHN5c3RlbSBsb2dzIGFuZCBjcmFzaCByZXBvcnRzLlwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pc1JlYWxEZXZpY2UoKSkge1xuICAgICAgYXdhaXQgdGhpcy5zdGFydExvZ0NhcHR1cmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgdGhpcy5zdGFydExvZ0NhcHR1cmUodGhpcy5zaW0pO1xuICAgIH1cbiAgfVxuXG4gIGdldCByZWFsRGV2aWNlICgpIHtcbiAgICB0aGlzLl9yZWFsRGV2aWNlID0gdGhpcy5fcmVhbERldmljZSB8fCB0aGlzLmdldElEZXZpY2VPYmooKTtcbiAgICByZXR1cm4gdGhpcy5fcmVhbERldmljZTtcbiAgfVxuXG4gIHNldCByZWFsRGV2aWNlIChyZCkge1xuICAgIHRoaXMuX3JlYWxEZXZpY2UgPSByZDtcbiAgfVxufVxuXG5mb3IgKGxldCBbY21kLCBmbl0gb2YgXy50b1BhaXJzKGNvbW1hbmRzKSkge1xuICBJb3NEcml2ZXIucHJvdG90eXBlW2NtZF0gPSBmbjtcbn1cblxuXG5leHBvcnQgeyBJb3NEcml2ZXIsIGRlZmF1bHRTZXJ2ZXJDYXBzIH07XG5leHBvcnQgZGVmYXVsdCBJb3NEcml2ZXI7XG4iXSwiZmlsZSI6ImxpYi9kcml2ZXIuanMiLCJzb3VyY2VSb290IjoiLi4vLi4ifQ==
